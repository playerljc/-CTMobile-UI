"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=_default;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_uiUtil=require("@ctmobile/ui-util");function init(){this.el=_uiUtil.Dom6.createElement('<div class="ct-scrollTopAnimation-btn"></div>'),this.parent.appendChild(this.el)}function initMask(){this.maskEl=document.body.querySelector(".ct-scrollTopAnimation-mask"),this.maskEl||(this.maskEl=_uiUtil.Dom6.createElement("<div class='ct-scrollTopAnimation-mask'></div>"),document.body.appendChild(this.maskEl))}function initEvents(){var e=this,a=this;a.el.addEventListener("click",function(){if(a.key)return!1;a.key=!0,e.maskEl.style.display="block";var i=a.scrollEl.scrollTop,l=i,n=0,s=a.scrollEl.scrollHeight/(a.duration/(screen.updateInterval||16.7)+(a.duration%(screen.updateInterval||16.7)!=0?1:0));window.requestAnimationFrame(function e(){function t(){a.key=!1,a.maskEl.style.display="none",a.events.trigger("scrollTop")}i<n?n<l+s?l=n:l+=s:l-s<n?l=n:l-=s,a.scrollEl.scrollTop=l,i<n?n<=l?t():window.requestAnimationFrame(e):l<=n?t():window.requestAnimationFrame(e)})},!1),a.scrollEl.addEventListener("scroll",function(){0!==this.scrollTop?window.requestAnimationFrame(function(){a.el.style.display="block"}):window.requestAnimationFrame(function(){a.el.style.display="none"})},!1)}var BackTopAnimation=function(){function i(e,t){(0,_classCallCheck2.default)(this,i),this.parent=e,this.scrollEl=t,this.key=!1,this.duration=300,this.events=new _uiUtil.Events,init.call(this),initMask.call(this),initEvents.call(this)}return(0,_createClass2.default)(i,[{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"off",value:function(e,t){e?t?this.events.remove(e,t):this.events.clear(e):this.events.clearAll()}}]),i}();function _default(e,t){return new BackTopAnimation(e,t)}
//# sourceMappingURL=backtopanimation.js.map
