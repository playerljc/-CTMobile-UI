{"version":3,"sources":["jdcategorytab.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_default","_classCallCheck2","_createClass2","_defineProperty2","_iscroll","initMenuScroll","this","scroll","menuDom","mouseWheel","click","addEventListener","e","preventDefault","initEvents","self","menuULDom","target","_scrollTo","call","time","arguments","length","undefined","easing","ease","circular","scrollToElement","parentElement","querySelector","concat","activeIndex","parentNode","classList","remove","add","tabDoms","tabDom","children","parseInt","dataset","index","event","change","handler","initVar","el","JdCategoryTab","utils","refresh","key","type","doms","querySelectorAll","i"],"mappings":"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","file":"jdcategorytab.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = _default;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _iscroll = _interopRequireDefault(require(\"iscroll/build/iscroll\"));\n\n/**\r\n * initMenuScroll\r\n * @access private\r\n */\nfunction initMenuScroll() {\n  this.scroll = new _iscroll[\"default\"](this.menuDom, {\n    mouseWheel: true,\n    click: true\n  });\n  this.menuDom.addEventListener('touchmove', function (e) {\n    e.preventDefault();\n  });\n}\n/**\r\n * initEvents\r\n * @access private\r\n */\n\n\nfunction initEvents() {\n  var self = this;\n  this.menuULDom.addEventListener('click', function (e) {\n    var target = e.target;\n\n    _scrollTo.call(self, target);\n  });\n}\n/**\r\n * scrollTo\r\n * 滚动到指定的元素处\r\n * @access private\r\n * @param {HtmlElement} target\r\n * @param {Number} time\r\n * @param {string} easing\r\n */\n\n\nfunction _scrollTo(target) {\n  var time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 250;\n  var easing = arguments.length > 2 ? arguments[2] : undefined;\n  easing = easing || this.ease.circular;\n  var self = this;\n  self.scroll.scrollToElement(target.parentElement, time, null, null, easing);\n  this.menuULDom.querySelector(\"[data-index=\\\"\".concat(this.activeIndex, \"\\\"]\")).parentNode.classList.remove('cur');\n  target.parentNode.classList.add('cur');\n  var tabDoms = self.tabDom.children;\n  tabDoms[this.activeIndex].classList.remove('cur');\n  tabDoms[parseInt(target.dataset.index)].classList.add('cur');\n  this.activeIndex = parseInt(target.dataset.index);\n\n  if (self.event && self.event.change) {\n    self.event.change.handler(target.dataset.index, target, tabDoms[this.activeIndex]);\n  }\n}\n/**\r\n * initVar\r\n * @access private\r\n */\n\n\nfunction initVar() {\n  this.menuDom = this.el.querySelector('.ct-jdcategorytab-menu');\n  this.menuULDom = this.menuDom.querySelector('ul');\n  this.tabDom = this.el.querySelector('.ct-jdcategorytab-tab');\n}\n/**\r\n * JdCategoryTab\r\n * @class JdCategoryTab\r\n * @classdesc JdCategoryTab\r\n */\n\n\nvar JdCategoryTab =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * @constructor\r\n   */\n  function JdCategoryTab(el, activeIndex) {\n    (0, _classCallCheck2[\"default\"])(this, JdCategoryTab);\n    (0, _defineProperty2[\"default\"])(this, \"ease\", _iscroll[\"default\"].utils.ease);\n    this.el = el;\n    this.activeIndex = activeIndex;\n    initVar.call(this);\n    initMenuScroll.call(this);\n    initEvents.call(this);\n    this.refresh();\n    this.menuULDom.querySelector(\"[data-index=\\\"\".concat(this.activeIndex, \"\\\"]\")).parentNode.classList.add('cur');\n  }\n\n  (0, _createClass2[\"default\"])(JdCategoryTab, [{\n    key: \"on\",\n\n    /**\r\n     * on\r\n     * @param {string} type\r\n     * @param {Function} handler\r\n     */\n    value: function on(type, handler) {\n      if (!this.event) {\n        this.event = {};\n      }\n\n      this.event[type] = {\n        type: type,\n        handler: handler\n      };\n    }\n    /**\r\n     * refresh\r\n     */\n\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      var doms = this.menuULDom.querySelectorAll('li > a');\n\n      for (var i = 0; i < doms.length; i++) {\n        doms[i].dataset.index = i;\n      }\n\n      this.scroll.refresh();\n    }\n    /**\r\n     * scrollTo\r\n     * @param {Number} index\r\n     * @param {Number} time\r\n     * @param {string} easing\r\n     */\n\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo(index) {\n      var time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 250;\n      var easing = arguments.length > 2 ? arguments[2] : undefined;\n      var target = this.menuULDom.querySelector(\"[data-index='\".concat(index, \"']\"));\n\n      _scrollTo.call(this, target, time, easing);\n    }\n  }]);\n  return JdCategoryTab;\n}();\n/**\r\n * JdCategoryTabFactory\r\n * @param {HtmlElement} el\r\n * @param {number} activeIndex\r\n * @return {JdCategoryTab}\r\n */\n\n\nfunction _default(el) {\n  var activeIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  return new JdCategoryTab(el, activeIndex);\n}"]}