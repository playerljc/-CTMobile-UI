"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=_default;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_iscroll=_interopRequireDefault(require("iscroll/build/iscroll"));function initMenuScroll(){this.scroll=new _iscroll.default(this.menuDom,{mouseWheel:!0,click:!0}),this.menuDom.addEventListener("touchmove",function(e){e.preventDefault()})}function initEvents(){var i=this;this.menuULDom.addEventListener("click",function(e){var t=e.target;_scrollTo.call(i,t)})}function _scrollTo(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:250,i=2<arguments.length?arguments[2]:void 0;i=i||this.ease.circular;var r=this;r.scroll.scrollToElement(e.parentElement,t,null,null,i),this.menuULDom.querySelector('[data-index="'.concat(this.activeIndex,'"]')).parentNode.classList.remove("cur"),e.parentNode.classList.add("cur");var l=r.tabDom.children;l[this.activeIndex].classList.remove("cur"),l[parseInt(e.dataset.index)].classList.add("cur"),this.activeIndex=parseInt(e.dataset.index),r.event&&r.event.change&&r.event.change.handler(e.dataset.index,e,l[this.activeIndex])}function initVar(){this.menuDom=this.el.querySelector(".ct-jdcategorytab-menu"),this.menuULDom=this.menuDom.querySelector("ul"),this.tabDom=this.el.querySelector(".ct-jdcategorytab-tab")}var JdCategoryTab=function(){function i(e,t){(0,_classCallCheck2.default)(this,i),(0,_defineProperty2.default)(this,"ease",_iscroll.default.utils.ease),this.el=e,this.activeIndex=t,initVar.call(this),initMenuScroll.call(this),initEvents.call(this),this.refresh(),this.menuULDom.querySelector('[data-index="'.concat(this.activeIndex,'"]')).parentNode.classList.add("cur")}return(0,_createClass2.default)(i,[{key:"on",value:function(e,t){this.event||(this.event={}),this.event[e]={type:e,handler:t}}},{key:"refresh",value:function(){for(var e=this.menuULDom.querySelectorAll("li > a"),t=0;t<e.length;t++)e[t].dataset.index=t;this.scroll.refresh()}},{key:"scrollTo",value:function(e,t,i){var r=1<arguments.length&&void 0!==t?t:250,l=2<arguments.length?i:void 0,a=this.menuULDom.querySelector("[data-index='".concat(e,"']"));_scrollTo.call(this,a,r,l)}}]),i}();function _default(e){return new JdCategoryTab(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)}
//# sourceMappingURL=jdcategorytab.js.map
