"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=_default;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_uiUtil=require("@ctmobile/ui-util"),selectorPrefix="ct-sidepanel-",positionConfig={init:{overlay:{left:function(){silder.call(this,this.el,"-100%",0,0,0)},right:function(){silder.call(this,this.el,"".concat(document.body.offsetWidth,"px"),0,0,0)},top:function(){silder.call(this,this.el,0,"-100%",0,0)},bottom:function(){silder.call(this,this.el,0,"".concat(document.body.offsetHeight,"px"),0,0)}},reveal:{left:function(){this.el.style.zIndex=this.config.zIndex,this.rMasterEl.style.zIndex=this.config.zIndex+1,this.el.style.left="0"},right:function(){this.el.style.zIndex=this.config.zIndex,this.rMasterEl.style.zIndex=this.config.zIndex+1,this.el.style.right="0"}},push:{left:function(){this.el.style.left="0",this.pSlaveEl.style.left="".concat(this.el.offsetWidth,"px"),silder.call(this,this.pMasterEl,"-".concat(this.el.offsetWidth,"px"),0,0,0)},right:function(){this.el.style.right="0",this.pSlaveEl.style.right="".concat(this.el.offsetWidth,"px"),silder.call(this,this.pMasterEl,"".concat(this.el.offsetWidth,"px"),0,0,0)}}},show:{overlay:{left:function(){silder.call(this,this.el,0,0,0,"".concat(this.config.time,"ms"),afterShowCallback),this.maskEl&&(this.maskEl.style.display="block")},right:function(){silder.call(this,this.el,"".concat(document.body.offsetWidth-this.el.offsetWidth,"px"),0,0,"".concat(this.config.time,"ms"),afterShowCallback),this.maskEl&&(this.maskEl.style.display="block")},top:function(){silder.call(this,this.el,0,0,0,"".concat(this.config.time,"ms"),afterShowCallback),this.maskEl&&(this.maskEl.style.display="block")},bottom:function(){silder.call(this,this.el,0,"".concat(document.body.offsetHeight-this.el.offsetHeight,"px"),0,"".concat(this.config.time,"ms"),afterShowCallback),this.maskEl&&(this.maskEl.style.display="block")}},reveal:{left:function(){this.el.style.zIndex=this.config.zIndex,this.maskEl.style.zIndex=this.config.zIndex-1,this.rMasterEl.style.zIndex=this.config.zIndex-2,silder.call(this,this.rMasterEl,"".concat(this.el.offsetWidth,"px"),0,0,"".concat(this.config.time,"ms"),afterShowCallback),this.maskEl&&(this.maskEl.style.display="block")},right:function(){this.el.style.zIndex=this.config.zIndex,this.maskEl.style.zIndex=this.config.zIndex-1,this.rMasterEl.style.zIndex=this.config.zIndex-2,silder.call(this,this.rMasterEl,"-".concat(this.el.offsetWidth,"px"),0,0,"".concat(this.config.time,"ms"),afterShowCallback),this.maskEl&&(this.maskEl.style.display="block")}},push:{left:function(){silder.call(this,this.pMasterEl,0,0,0,"".concat(this.config.time,"ms"),afterShowCallback),this.maskEl&&(this.maskEl.style.display="block")},right:function(){silder.call(this,this.pMasterEl,0,0,0,"".concat(this.config.time,"ms"),afterShowCallback),this.maskEl&&(this.maskEl.style.display="block")}}},close:{overlay:{left:function(){silder.call(this,this.el,"-100%",0,0,"".concat(this.config.time,"ms"),afterCloseCallback),this.maskEl&&(this.maskEl.style.display="none")},right:function(){silder.call(this,this.el,"".concat(document.body.offsetWidth,"px"),0,0,"".concat(this.config.time,"ms"),afterCloseCallback),this.maskEl&&(this.maskEl.style.display="none")},top:function(){silder.call(this,this.el,0,"-".concat(document.body.offsetHeight,"px"),0,"".concat(this.config.time,"ms"),afterCloseCallback),this.maskEl&&(this.maskEl.style.display="none")},bottom:function(){silder.call(this,this.el,0,"".concat(document.body.offsetHeight,"px"),0,"".concat(this.config.time,"ms"),afterCloseCallback),this.maskEl&&(this.maskEl.style.display="none")}},reveal:{left:function(){this.el.style.zIndex=this.config.zIndex,this.rMasterEl.style.zIndex=this.config.zIndex+1,silder.call(this,this.rMasterEl,0,0,0,"".concat(this.config.time,"ms"),afterCloseCallback),this.maskEl&&(this.maskEl.style.display="none")},right:function(){this.el.style.zIndex=this.config.zIndex,this.rMasterEl.style.zIndex=this.config.zIndex+1,silder.call(this,this.rMasterEl,0,0,0,"".concat(this.config.time,"ms"),afterCloseCallback),this.maskEl&&(this.maskEl.style.display="none")}},push:{left:function(){silder.call(this,this.pMasterEl,"-".concat(this.el.offsetWidth,"px"),0,0,"".concat(this.config.time,"ms"),afterCloseCallback),this.maskEl&&(this.maskEl.style.display="none")},right:function(){silder.call(this,this.pMasterEl,"".concat(this.el.offsetWidth,"px"),0,0,"".concat(this.config.time,"ms"),afterCloseCallback),this.maskEl&&(this.maskEl.style.display="none")}}}};function createMask(){var t=this,e=_uiUtil.Dom6.createElement("<div class='".concat(selectorPrefix,"mask'></div>"));return e.style.zIndex=t.config.zIndex-1,e.addEventListener("click",function(){t.close()}),e}function initEvents(){if(this.config.listeners)for(var t=this.config.listeners,e=void 0===t?{}:t,i=Object.keys(e),s=0;s<i.length;s+=1){var l=i[s];this.events.on(l,e[l])}}function init(){var t=this.config,e=this.el;"left"===t.direction||"right"===t.direction?(e.style.height="100%",t.width?e.style.width=t.width:e.style.width="".concat(.9*document.body.offsetWidth,"px")):(e.style.width="100%",t.height?e.style.height=t.height:e.style.height="".concat(.3*document.body.offsetHeight,"px")),positionConfig.init[t.type][t.direction].call(this)}function silder(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"0",i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"0",s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"0",l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"0",n=5<arguments.length?arguments[5]:void 0;n&&n.call(this,t),t.style.transform=t.style.webkitTransform="translate3d(".concat(e,",").concat(i,",").concat(s,")"),t.style.transition=t.style.webkitTransition="all ".concat(l," ease")}function afterShowCallback(i){var s=this;i.addEventListener("transitionend",function t(e){e.stopPropagation(),s.events.trigger("afterShow",s),i.removeEventListener("afterShow",t)})}function afterCloseCallback(i){var s=this;i.addEventListener("transitionend",function t(e){e.stopPropagation(),s.events.trigger("afterClose",s),i.removeEventListener("afterClose",t)})}var SidePanel=function(){function i(t,e){(0,_classCallCheck2.default)(this,i),this.el=t,this.config=Object.assign({mask:!0,type:"overlay",direction:"left",time:300,zIndex:9999},e),this.rMasterEl=this.el.parentNode.querySelector(".".concat(selectorPrefix,"reveal-master")),this.pMasterEl=this.el.parentNode,this.pSlaveEl=this.pMasterEl?this.pMasterEl.querySelector(".".concat(selectorPrefix,"push-slave")):null,this.el.style.zIndex=this.config.zIndex,this.rMasterEl&&(this.rMasterEl.style.zIndex=this.config.zIndex+1),this.pMasterEl&&(this.pMasterEl.style.zIndex=this.config.zIndex-1),this.pSlaveEl&&(this.pSlaveEl.style.zIndex=this.config.zIndex-2),this.collapse=!1,this.el.classList.add(this.config.direction),this.events=new _uiUtil.Events,e.mask&&(this.maskEl=createMask.call(this),_uiUtil.Dom6.insertAfter(this.maskEl,this.el)),initEvents.call(this),init.call(this),this.events.trigger("create",this)}return(0,_createClass2.default)(i,[{key:"show",value:function(){this.events.trigger("beforeShow",this);var t=this.config,e=t.type,i=t.direction;return positionConfig.show[e][i].call(this),this.collapse=!0,this}},{key:"close",value:function(){this.events.trigger("beforeClose",this);var t=this.config,e=t.type,i=t.direction;return positionConfig.close[e][i].call(this),this.collapse=!1,this}},{key:"isCollapse",value:function(){return this.collapse}},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"off",value:function(t,e){t?e?this.events.remove(t,e):this.events.clear(t):this.events.clearAll()}}]),i}();function _default(t,e){return new SidePanel(t,e)}
//# sourceMappingURL=sidepanel.js.map
