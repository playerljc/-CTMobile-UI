{"version":3,"sources":["pullrefresh.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","maskEl","_classCallCheck2","_createClass2","_moment","_uiUtil","selectorPrefix","dataFormatStr","template","concat","format","translateY","el","y","arguments","length","undefined","duration","style","transition","webkitTransition","transform","webkitTransform","rotateIcon","distance","deg","clear","this","scrollEl","removeEventListener","onTouchMove","onTouchEnd","downpull","isTop","pullEl","display","refreshEl","iconEl","overflowY","_refresh","self","addEventListener","onTransitionEnd","events","trigger","refreshHeight","_reset","call","PullRefresh","_ref","scrollInnerEl","_ref$pullHeight","pullHeight","clientHeight","innerHTML","querySelector","labelEl","updateEl","onTouchStart","bind","onScroll","Dom6","createElement","document","body","appendChild","Events","updateTime","innerText","key","e","startPageY","changedTouches","pageY","overflow","difference","Math","abs","preventDefault","console","log","target","scrollTop","type","handler","on","remove","clearAll","_default"],"mappings":"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","file":"pullrefresh.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _uiUtil = require(\"@ctmobile/ui-util\");\n\nvar maskEl;\nvar selectorPrefix = 'ct-pullrefresh-';\nvar dataFormatStr = 'YYYY-MM-DD HH:mm:ss';\nvar template = \"<div class=\\\"\".concat(selectorPrefix, \"inner\\\">\\n      <div class=\\\"\").concat(selectorPrefix, \"icon\\\"></div>\\n      <p class=\\\"\").concat(selectorPrefix, \"label\\\">\\u4E0B\\u62C9\\u5237\\u65B0</p>\\n      <p class=\\\"\").concat(selectorPrefix, \"update\\\">\\u66F4\\u65B0\\u65F6\\u95F4\\uFF1A<span class=\\\"\").concat(selectorPrefix, \"update-label\\\">\").concat((0, _moment.default)().format(dataFormatStr), \"</span></p>\\n   </div>\\n   <div class=\\\"\").concat(selectorPrefix, \"refresh la-ball-circus la-dark\\\">\\n      <div></div>\\n      <div></div>\\n      <div></div>\\n      <div></div>\\n      <div></div>\\n   </div>\");\n/**\r\n * Y平移\r\n * @param {HtmlElement} el\r\n * @param {string} y\r\n * @param {string} duration\r\n * @access private\r\n */\n\nfunction translateY(el) {\n  var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var duration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  el.style.transition = el.style.webkitTransition = \"transform \".concat(duration, \"ms ease\");\n  el.style.transform = el.style.webkitTransform = \"translate3d(0,\".concat(y, \"px,0)\");\n}\n/**\r\n * rotateIcon\r\n * @param {HtmlElement} el\r\n * @param {string} distance\r\n * @param {string} duration\r\n * @access private\r\n */\n\n\nfunction rotateIcon(el, distance) {\n  var duration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var deg = distance;\n  el.style.transition = el.style.webkitTransition = \"transform \".concat(duration, \"ms linear\");\n  el.style.transform = el.style.webkitTransform = \"rotate(\".concat(deg, \"deg)\");\n}\n/**\r\n * clear\r\n * @access private\r\n */\n\n\nfunction clear() {\n  this.scrollEl.removeEventListener('mousemove', this.onTouchMove);\n  this.scrollEl.removeEventListener('mouseup', this.onTouchEnd);\n  this.scrollEl.removeEventListener('touchmove', this.onTouchMove);\n  this.scrollEl.removeEventListener('touchend', this.onTouchEnd);\n  this.downpull = false;\n  this.isTop = true;\n  this.pullEl.style.display = 'flex';\n  this.refreshEl.style.display = 'none';\n  rotateIcon(this.iconEl, 180, 0);\n  this.scrollEl.style.overflowY = 'auto';\n  maskEl.style.display = 'none';\n}\n/**\r\n * refresh\r\n * @access private\r\n */\n\n\nfunction _refresh() {\n  var self = this;\n  maskEl.style.display = 'block';\n  this.scrollEl.removeEventListener('mousemove', this.onTouchMove);\n  this.scrollEl.removeEventListener('mouseup', this.onTouchEnd);\n  this.scrollEl.removeEventListener('touchmove', this.onTouchMove);\n  this.scrollEl.removeEventListener('touchend', this.onTouchEnd);\n\n  function onTransitionEnd() {\n    self.pullEl.style.display = 'none';\n    self.refreshEl.style.display = 'block';\n    self.events.trigger('pullRefresh', self);\n    self.scrollEl.removeEventListener('transitionend', onTransitionEnd);\n  }\n\n  self.scrollEl.addEventListener('transitionend', onTransitionEnd);\n  translateY(self.scrollEl, self.refreshHeight, 500);\n  translateY(self.el, self.refreshHeight, 500);\n  rotateIcon(self.iconEl, 180, 300);\n}\n/**\r\n * reset\r\n * @access private\r\n */\n\n\nfunction _reset() {\n  var self = this;\n  clear.call(self);\n\n  function onTransitionEnd() {\n    self.scrollEl.removeEventListener('transitionend', onTransitionEnd);\n  }\n\n  self.scrollEl.addEventListener('transitionend', onTransitionEnd);\n  translateY(self.scrollEl, 0, 200);\n  translateY(self.el, 0, 200);\n}\n/**\r\n * PullRefresh\r\n * @class PullRefresh\r\n * @classdesc PullRefresh\r\n */\n\n\nvar PullRefresh =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * constructor\r\n   * @param {HtmlElement} scrollEl\r\n   * @param {HtmlElement} scrollInnerEl\r\n   * @param {HtmlElement} pullEl\r\n   * @param {number} pullHeight\r\n   */\n  function PullRefresh(_ref) {\n    var scrollEl = _ref.scrollEl,\n        scrollInnerEl = _ref.scrollInnerEl,\n        pullEl = _ref.pullEl,\n        _ref$pullHeight = _ref.pullHeight,\n        pullHeight = _ref$pullHeight === void 0 ? 200 : _ref$pullHeight;\n    (0, _classCallCheck2.default)(this, PullRefresh);\n    this.scrollEl = scrollEl;\n    this.scrollInnerEl = scrollInnerEl;\n    this.el = pullEl;\n    this.pullHeight = pullHeight;\n\n    if (pullHeight <= 0) {\n      this.pullHeight = 200;\n    } else if (pullHeight > this.scrollEl.clientHeight) {\n      this.pullHeight = this.scrollEl.clientHeight;\n    } else {\n      this.pullHeight = pullHeight;\n    }\n\n    this.el.innerHTML = template;\n    this.pullEl = this.el.querySelector(\".\".concat(selectorPrefix, \"inner\"));\n    this.iconEl = this.el.querySelector(\".\".concat(selectorPrefix, \"icon\"));\n    this.labelEl = this.el.querySelector(\".\".concat(selectorPrefix, \"label\"));\n    this.updateEl = this.el.querySelector(\".\".concat(selectorPrefix, \"update-label\"));\n    this.refreshEl = this.el.querySelector(\".\".concat(selectorPrefix, \"refresh\"));\n    this.refreshHeight = this.el.clientHeight;\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchMove = this.onTouchMove.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onScroll = this.onScroll.bind(this);\n\n    if (!maskEl) {\n      maskEl = _uiUtil.Dom6.createElement(\"<div class='\".concat(selectorPrefix, \"mask'></div>\"));\n      document.body.appendChild(maskEl);\n    }\n\n    this.events = new _uiUtil.Events();\n    /**\r\n     * 更新时间\r\n     * @type {boolean}\r\n     * @private\r\n     */\n\n    this.updateTime = (0, _moment.default)().format(dataFormatStr);\n    this.updateEl.innerText = this.updateTime;\n    this.isTop = true;\n    this.scrollEl.addEventListener('touchstart', this.onTouchStart);\n    this.scrollEl.addEventListener('mousedown', this.onTouchStart);\n    this.scrollEl.addEventListener('scroll', this.onScroll);\n  }\n  /**\r\n   * onTouchStart\r\n   * @param {Event} e\r\n   */\n\n\n  (0, _createClass2.default)(PullRefresh, [{\n    key: \"onTouchStart\",\n    value: function onTouchStart(e) {\n      this.events.trigger('pullStart');\n      this.startPageY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\n      this.scrollEl.addEventListener('touchmove', this.onTouchMove);\n      this.scrollEl.addEventListener('mousemove', this.onTouchMove);\n      this.scrollEl.addEventListener('touchend', this.onTouchEnd);\n      this.scrollEl.addEventListener('mouseup', this.onTouchEnd);\n    }\n    /**\r\n     * onTouchMove\r\n     * @param {Event} e\r\n     */\n\n  }, {\n    key: \"onTouchMove\",\n    value: function onTouchMove(e) {\n      this.scrollEl.style.overflow = 'hidden';\n      var targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\n      var difference = targetY - this.startPageY;\n      var distance = Math.abs(difference);\n      /**\r\n       * 中线下\r\n       */\n\n      if (difference > 0) {\n        e.preventDefault();\n        this.downpull = true;\n        /**\r\n         * 正常拉\r\n         */\n\n        if (distance < this.pullHeight) {\n          translateY(this.scrollEl, distance, 0);\n          translateY(this.el, distance, 0);\n\n          if (distance >= this.refreshHeight + 80) {\n            rotateIcon(this.iconEl, 0, 150);\n            console.log('3.具备刷新条件');\n            this.labelEl.innerText = '松开刷新';\n            this.events.trigger('pullCanRefresh');\n          } else {\n            rotateIcon(this.iconEl, 180, 150);\n            this.labelEl.innerText = '下拉刷新';\n          }\n\n          this.el.style.display = 'flex';\n        } else {\n          /**\r\n           * 越界了\r\n           */\n          translateY(this.scrollEl, this.pullHeight, 0);\n          translateY(this.el, this.pullHeight, 0);\n          rotateIcon(this.iconEl, 0, 150);\n          console.log('4.拉动到了底部');\n          this.labelEl.innerText = '松开刷新';\n          this.events.trigger('pullBottom');\n        }\n      } else if (this.downpull) {\n        /**\r\n         * 中线上\r\n         */\n        e.preventDefault();\n        translateY(this.scrollEl, 0, 0);\n        translateY(this.el, 0, 0);\n        rotateIcon(this.iconEl, 180, 0);\n      } else {\n        clear.call(this);\n      }\n    }\n    /**\r\n     * onTouchEnd\r\n     * @param {Event} e\r\n     */\n\n  }, {\n    key: \"onTouchEnd\",\n    value: function onTouchEnd(e) {\n      var self = this;\n      var targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\n      var difference = targetY - this.startPageY;\n      var distance = Math.abs(difference);\n      /**\r\n       * 中线下\r\n       */\n\n      if (difference > 0) {\n        /**\r\n         * 正常拉\r\n         */\n        if (distance < this.pullHeight) {\n          if (distance >= this.refreshHeight + 80) {\n            _refresh.call(self, false);\n          } else {\n            console.log('2.没有具备刷新条件弹回');\n            self.events.trigger('pullRebound');\n\n            _reset.call(self);\n          }\n        } else {\n          /**\r\n           * 越界了\r\n           */\n          _refresh.call(self, true);\n        }\n      } else {\n        /**\r\n         * 中线上\r\n         */\n        clear.call(self);\n      }\n    }\n    /**\r\n     * onScroll\r\n     * @param {Event} e\r\n     */\n\n  }, {\n    key: \"onScroll\",\n    value: function onScroll(e) {\n      var self = this;\n\n      if (e.target.scrollTop === 0) {\n        self.isTop = true;\n        self.scrollEl.addEventListener('touchstart', this.onTouchStart);\n        self.scrollEl.addEventListener('mousedown', this.onTouchStart);\n      } else if (self.isTop) {\n        self.isTop = false;\n        self.scrollEl.removeEventListener('touchstart', this.onTouchStart);\n        self.scrollEl.removeEventListener('mousedown', this.onTouchStart);\n      }\n    }\n    /**\r\n     * reset\r\n     */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.updateTime = (0, _moment.default)().format(dataFormatStr);\n      this.updateEl.innerText = this.updateTime;\n\n      _reset.call(this);\n    }\n    /**\r\n     * refresh\r\n     */\n\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      _refresh.call(this);\n    }\n    /**\r\n     * on 注册事件\r\n     * @param {string} type\r\n     *\r\n     * 1.拉动开始 pullStart\r\n     * 2.没有具备刷新条件弹回 pullRebound\r\n     * 3.具备刷新条件 pullCanRefresh\r\n     * 4.拉动到了底部 pullBottom\r\n     * 5.刷新 pullRefresh\r\n     *\r\n     * @param {Function} handler\r\n     */\n\n  }, {\n    key: \"on\",\n    value: function on(type, handler) {\n      this.events.on(type, handler);\n    }\n    /**\r\n     * 删除指定type下的事件或清除所有\r\n     * @param {string} type\r\n     * @param {Function} handler\r\n     */\n\n  }, {\n    key: \"off\",\n    value: function off(type, handler) {\n      if (type) {\n        if (handler) {\n          this.events.remove(type, handler);\n        } else {\n          this.events.clear(type);\n        }\n      } else {\n        this.events.clearAll();\n      }\n    }\n  }]);\n  return PullRefresh;\n}();\n\nvar _default = PullRefresh;\nexports.default = _default;"]}