{"version":3,"sources":["pullrefresh.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_default","maskEl","_classCallCheck2","_createClass2","_moment","_lodash","_uiUtil","selectorPrefix","dataFormatStr","template","concat","format","translateY","el","y","arguments","length","undefined","duration","style","transition","webkitTransition","transform","webkitTransform","rotateIcon","distance","deg","clear","this","scrollEl","removeEventListener","onTouchMove","onTouchEnd","downpull","isTop","pullEl","display","refreshEl","config","icon","iconEl","overflowY","_refresh","self","addEventListener","onTransitionEnd","events","trigger","refreshHeight","_reset","call","PullRefresh","_ref","scrollInnerEl","_ref$pullHeight","pullHeight","_ref$icon","_ref$label","label","_ref$canLabel","canLabel","_ref$showUpdate","showUpdate","_ref$loadingAnimation","loadingAnimation","clientHeight","innerHTML","querySelector","labelEl","updateEl","onTouchStart","bind","onScroll","Dom6","createElement","document","body","appendChild","Events","updateTime","innerText","key","e","startPageY","changedTouches","pageY","overflow","difference","Math","abs","preventDefault","console","log","target","scrollTop","type","handler","on","remove","clearAll"],"mappings":"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","file":"pullrefresh.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _uiUtil = require(\"@ctmobile/ui-util\");\n\nvar maskEl;\nvar selectorPrefix = 'ct-pullrefresh-';\nvar dataFormatStr = 'YYYY-MM-DD HH:mm:ss';\n/** *\r\n * ct-pullrefresh\r\n *   ct-pullrefresh-inner\r\n *     ct-pullrefresh-icon\r\n *     ct-pullrefresh-label\r\n *     ct-pullrefresh-update\r\n *   ct-pullrefresh-refresh\r\n * @type {string}\r\n */\n\nvar template = _lodash.default.template(\"<div class=\\\"\".concat(selectorPrefix, \"inner\\\">\\n      <%if(icon){%>\\n        <div class=\\\"\").concat(selectorPrefix, \"icon\\\" style=\\\"background: none;\\\"><img src=\\\"<%=icon%>\\\"></div>\\n      <%} else {%>\\n        <div class=\\\"\").concat(selectorPrefix, \"icon\\\"></div>  \\n      <%}%>\\n      <p class=\\\"\").concat(selectorPrefix, \"label\\\"><%=label%></p>\\n      <%if(showUpdate) {%>\\n      <p class=\\\"\").concat(selectorPrefix, \"update\\\">\\u66F4\\u65B0\\u65F6\\u95F4\\uFF1A<span class=\\\"\").concat(selectorPrefix, \"update-label\\\">\").concat((0, _moment.default)().format(dataFormatStr), \"</span></p>\\n      <%}%>\\n   </div>\\n   <%if(loadingAnimation) {%>\\n    <div class=\\\"\").concat(selectorPrefix, \"refresh\\\">\\n      <%=loadingAnimation%>\\n    </div>\\n   <%} else {%>\\n    <div class=\\\"\").concat(selectorPrefix, \"refresh la-ball-circus la-dark\\\">\\n      <div></div>\\n      <div></div>\\n      <div></div>\\n      <div></div>\\n      <div></div>\\n   </div>\\n   <%}%>\\n   \"));\n/**\r\n * Y平移\r\n * @param {HtmlElement} el\r\n * @param {string} y\r\n * @param {string} duration\r\n * @access private\r\n */\n\n\nfunction translateY(el) {\n  var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var duration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  el.style.transition = el.style.webkitTransition = \"transform \".concat(duration, \"ms ease\");\n  el.style.transform = el.style.webkitTransform = \"translate3d(0,\".concat(y, \"px,0)\");\n}\n/**\r\n * rotateIcon\r\n * @param {HtmlElement} el\r\n * @param {string} distance\r\n * @param {string} duration\r\n * @access private\r\n */\n\n\nfunction rotateIcon(el, distance) {\n  var duration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var deg = distance;\n  el.style.transition = el.style.webkitTransition = \"transform \".concat(duration, \"ms linear\");\n  el.style.transform = el.style.webkitTransform = \"rotate(\".concat(deg, \"deg)\");\n}\n/**\r\n * clear\r\n * @access private\r\n */\n\n\nfunction clear() {\n  this.scrollEl.removeEventListener('mousemove', this.onTouchMove);\n  this.scrollEl.removeEventListener('mouseup', this.onTouchEnd);\n  this.scrollEl.removeEventListener('touchmove', this.onTouchMove);\n  this.scrollEl.removeEventListener('touchend', this.onTouchEnd);\n  this.downpull = false;\n  this.isTop = true;\n  this.pullEl.style.display = 'flex';\n  this.refreshEl.style.display = 'none';\n\n  if (!this.config.icon) {\n    rotateIcon(this.iconEl, 180, 0);\n  }\n\n  this.scrollEl.style.overflowY = 'auto';\n  maskEl.style.display = 'none';\n}\n/**\r\n * refresh\r\n * @access private\r\n */\n\n\nfunction _refresh() {\n  var self = this;\n  maskEl.style.display = 'block';\n  this.scrollEl.removeEventListener('mousemove', this.onTouchMove);\n  this.scrollEl.removeEventListener('mouseup', this.onTouchEnd);\n  this.scrollEl.removeEventListener('touchmove', this.onTouchMove);\n  this.scrollEl.removeEventListener('touchend', this.onTouchEnd);\n\n  function onTransitionEnd() {\n    self.pullEl.style.display = 'none';\n    self.refreshEl.style.display = 'block';\n    self.events.trigger('pullRefresh', self);\n    self.scrollEl.removeEventListener('transitionend', onTransitionEnd);\n  }\n\n  self.scrollEl.addEventListener('transitionend', onTransitionEnd);\n  translateY(self.scrollEl, self.refreshHeight, 500);\n  translateY(self.el, self.refreshHeight, 500);\n\n  if (!self.config.icon) {\n    rotateIcon(self.iconEl, 180, 300);\n  }\n}\n/**\r\n * reset\r\n * @access private\r\n */\n\n\nfunction _reset() {\n  var self = this;\n  clear.call(self);\n\n  function onTransitionEnd() {\n    self.scrollEl.removeEventListener('transitionend', onTransitionEnd);\n  }\n\n  self.scrollEl.addEventListener('transitionend', onTransitionEnd);\n  translateY(self.scrollEl, 0, 200);\n  translateY(self.el, 0, 200);\n}\n/**\r\n * PullRefresh\r\n * @class PullRefresh\r\n * @classdesc PullRefresh\r\n *\r\n *\r\n *     ct-pullrefresh-icon\r\n *     ct-pullrefresh-label\r\n *     ct-pullrefresh-update\r\n *   ct-pullrefresh-refresh\r\n */\n\n\nvar PullRefresh =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * constructor\r\n   * @param {HtmlElement} scrollEl 滚动元素\r\n   * @param {HtmlElement} scrollInnerEl 滚动元素inner\r\n   * @param {HtmlElement} pullEl 下拉刷新元素\r\n   * @param {number} pullHeight 拉动高度\r\n   * @param {string} icon 图标html\r\n   * @param {string} label 默认文本html\r\n   * @param {string} canLabel 可以刷新文本html\r\n   * @param {boolean} showUpdate 是否显示更新时间\r\n   * @param {string} loadingAnimation 动画\r\n   */\n  function PullRefresh(_ref) {\n    var scrollEl = _ref.scrollEl,\n        scrollInnerEl = _ref.scrollInnerEl,\n        pullEl = _ref.pullEl,\n        _ref$pullHeight = _ref.pullHeight,\n        pullHeight = _ref$pullHeight === void 0 ? 200 : _ref$pullHeight,\n        _ref$icon = _ref.icon,\n        icon = _ref$icon === void 0 ? '' : _ref$icon,\n        _ref$label = _ref.label,\n        label = _ref$label === void 0 ? '下拉刷新' : _ref$label,\n        _ref$canLabel = _ref.canLabel,\n        canLabel = _ref$canLabel === void 0 ? '松开刷新' : _ref$canLabel,\n        _ref$showUpdate = _ref.showUpdate,\n        showUpdate = _ref$showUpdate === void 0 ? true : _ref$showUpdate,\n        _ref$loadingAnimation = _ref.loadingAnimation,\n        loadingAnimation = _ref$loadingAnimation === void 0 ? '' : _ref$loadingAnimation;\n    (0, _classCallCheck2.default)(this, PullRefresh);\n    this.scrollEl = scrollEl;\n    this.scrollInnerEl = scrollInnerEl;\n    this.el = pullEl;\n    this.config = {\n      icon: icon,\n      label: label,\n      canLabel: canLabel,\n      showUpdate: showUpdate,\n      loadingAnimation: loadingAnimation\n    };\n    this.pullHeight = pullHeight;\n\n    if (pullHeight <= 0) {\n      this.pullHeight = 200;\n    } else if (pullHeight > this.scrollEl.clientHeight) {\n      this.pullHeight = this.scrollEl.clientHeight;\n    } else {\n      this.pullHeight = pullHeight;\n    }\n\n    this.el.innerHTML = template(this.config);\n    this.pullEl = this.el.querySelector(\".\".concat(selectorPrefix, \"inner\"));\n    this.iconEl = this.el.querySelector(\".\".concat(selectorPrefix, \"icon\"));\n    this.labelEl = this.el.querySelector(\".\".concat(selectorPrefix, \"label\"));\n    this.updateEl = this.el.querySelector(\".\".concat(selectorPrefix, \"update-label\"));\n    this.refreshEl = this.el.querySelector(\".\".concat(selectorPrefix, \"refresh\"));\n    this.refreshHeight = this.el.clientHeight;\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchMove = this.onTouchMove.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onScroll = this.onScroll.bind(this);\n\n    if (!maskEl) {\n      maskEl = _uiUtil.Dom6.createElement(\"<div class='\".concat(selectorPrefix, \"mask'></div>\"));\n      document.body.appendChild(maskEl);\n    }\n\n    this.events = new _uiUtil.Events();\n    /**\r\n     * 更新时间\r\n     * @type {boolean}\r\n     * @private\r\n     */\n\n    if (this.config.showUpdate) {\n      this.updateTime = (0, _moment.default)().format(dataFormatStr);\n      this.updateEl.innerText = this.updateTime;\n    }\n\n    this.isTop = true;\n    this.scrollEl.addEventListener('touchstart', this.onTouchStart);\n    this.scrollEl.addEventListener('mousedown', this.onTouchStart);\n    this.scrollEl.addEventListener('scroll', this.onScroll);\n  }\n  /**\r\n   * onTouchStart\r\n   * @param {Event} e\r\n   */\n\n\n  (0, _createClass2.default)(PullRefresh, [{\n    key: \"onTouchStart\",\n    value: function onTouchStart(e) {\n      this.events.trigger('pullStart');\n      this.startPageY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\n      this.scrollEl.addEventListener('touchmove', this.onTouchMove);\n      this.scrollEl.addEventListener('mousemove', this.onTouchMove);\n      this.scrollEl.addEventListener('touchend', this.onTouchEnd);\n      this.scrollEl.addEventListener('mouseup', this.onTouchEnd);\n    }\n    /**\r\n     * onTouchMove\r\n     * @param {Event} e\r\n     */\n\n  }, {\n    key: \"onTouchMove\",\n    value: function onTouchMove(e) {\n      this.scrollEl.style.overflow = 'hidden';\n      var targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\n      var difference = targetY - this.startPageY;\n      var distance = Math.abs(difference);\n      /**\r\n       * 中线下\r\n       */\n\n      if (difference > 0) {\n        e.preventDefault();\n        this.downpull = true;\n        /**\r\n         * 正常拉\r\n         */\n\n        if (distance < this.pullHeight) {\n          translateY(this.scrollEl, distance, 0);\n          translateY(this.el, distance, 0);\n\n          if (distance >= this.refreshHeight + 80) {\n            if (!this.config.icon) {\n              rotateIcon(this.iconEl, 0, 150);\n            }\n\n            console.log('3.具备刷新条件');\n            this.labelEl.innerText = this.config.canLabel;\n            this.events.trigger('pullCanRefresh');\n          } else {\n            if (!this.config.icon) {\n              rotateIcon(this.iconEl, 180, 150);\n            }\n\n            this.labelEl.innerText = this.config.label;\n          }\n\n          this.el.style.display = 'flex';\n        } else {\n          /**\r\n           * 越界了\r\n           */\n          translateY(this.scrollEl, this.pullHeight, 0);\n          translateY(this.el, this.pullHeight, 0);\n\n          if (!this.config.icon) {\n            rotateIcon(this.iconEl, 0, 150);\n          }\n\n          console.log('4.拉动到了底部');\n          this.labelEl.innerText = this.config.canLabel;\n          this.events.trigger('pullBottom');\n        }\n      } else if (this.downpull) {\n        /**\r\n         * 中线上\r\n         */\n        e.preventDefault();\n        translateY(this.scrollEl, 0, 0);\n        translateY(this.el, 0, 0);\n\n        if (!this.config.icon) {\n          rotateIcon(this.iconEl, 180, 0);\n        }\n      } else {\n        clear.call(this);\n      }\n    }\n    /**\r\n     * onTouchEnd\r\n     * @param {Event} e\r\n     */\n\n  }, {\n    key: \"onTouchEnd\",\n    value: function onTouchEnd(e) {\n      var self = this;\n      var targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\n      var difference = targetY - this.startPageY;\n      var distance = Math.abs(difference);\n      /**\r\n       * 中线下\r\n       */\n\n      if (difference > 0) {\n        /**\r\n         * 正常拉\r\n         */\n        if (distance < this.pullHeight) {\n          if (distance >= this.refreshHeight + 80) {\n            _refresh.call(self, false);\n          } else {\n            console.log('2.没有具备刷新条件弹回');\n            self.events.trigger('pullRebound');\n\n            _reset.call(self);\n          }\n        } else {\n          /**\r\n           * 越界了\r\n           */\n          _refresh.call(self, true);\n        }\n      } else {\n        /**\r\n         * 中线上\r\n         */\n        clear.call(self);\n      }\n    }\n    /**\r\n     * onScroll\r\n     * @param {Event} e\r\n     */\n\n  }, {\n    key: \"onScroll\",\n    value: function onScroll(e) {\n      var self = this;\n\n      if (e.target.scrollTop === 0) {\n        self.isTop = true;\n        self.scrollEl.addEventListener('touchstart', this.onTouchStart);\n        self.scrollEl.addEventListener('mousedown', this.onTouchStart);\n      } else if (self.isTop) {\n        self.isTop = false;\n        self.scrollEl.removeEventListener('touchstart', this.onTouchStart);\n        self.scrollEl.removeEventListener('mousedown', this.onTouchStart);\n      }\n    }\n    /**\r\n     * reset\r\n     */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      if (this.config.showUpdate) {\n        this.updateTime = (0, _moment.default)().format(dataFormatStr);\n        this.updateEl.innerText = this.updateTime;\n      }\n\n      _reset.call(this);\n    }\n    /**\r\n     * refresh\r\n     */\n\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      _refresh.call(this);\n    }\n    /**\r\n     * on 注册事件\r\n     * @param {string} type\r\n     *\r\n     * 1.拉动开始 pullStart\r\n     * 2.没有具备刷新条件弹回 pullRebound\r\n     * 3.具备刷新条件 pullCanRefresh\r\n     * 4.拉动到了底部 pullBottom\r\n     * 5.刷新 pullRefresh\r\n     *\r\n     * @param {Function} handler\r\n     */\n\n  }, {\n    key: \"on\",\n    value: function on(type, handler) {\n      this.events.on(type, handler);\n    }\n    /**\r\n     * 删除指定type下的事件或清除所有\r\n     * @param {string} type\r\n     * @param {Function} handler\r\n     */\n\n  }, {\n    key: \"off\",\n    value: function off(type, handler) {\n      if (type) {\n        if (handler) {\n          this.events.remove(type, handler);\n        } else {\n          this.events.clear(type);\n        }\n      } else {\n        this.events.clearAll();\n      }\n    }\n  }]);\n  return PullRefresh;\n}();\n/**\r\n * PullRefresh\r\n * @param {Object} config\r\n * @return {PullRefresh}\r\n */\n\n\nfunction _default(config) {\n  return new PullRefresh(config);\n}"]}