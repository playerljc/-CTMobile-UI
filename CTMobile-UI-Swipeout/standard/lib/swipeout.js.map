{"version":3,"sources":["swipeout.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","className","_classCallCheck2","_createClass2","_swiper","_uiUtil","initEvents","this","config","listeners","_this$config$listener","keys","i","length","p","events","on","render","_this","_this$config$directio","direction","swiper","destroy","el","init","initialSlide","slidesPerView","centeredSlides","spaceBetween","trigger","Swipeout","assign","Events","call","key","update","changeDirection","slideTo","clearAll","destory","parentElement","removeChild","self","addEventListener","onTransitionEnd","removeEventListener","remove","height","offsetHeight","style","transition","transform","concat","setTimeout","type","handler","clear","SwipeoutFactory","create","_default"],"mappings":"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","file":"swipeout.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.className = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _swiper = _interopRequireDefault(require(\"swiper\"));\n\nvar _uiUtil = require(\"@ctmobile/ui-util\");\n\nvar className = 'ct-swipeout';\nexports.className = className;\n\n/**\r\n * initEvents\r\n * @access private\r\n */\nfunction initEvents() {\n  if (this.config && this.config.listeners) {\n    var _this$config$listener = this.config.listeners,\n        listeners = _this$config$listener === void 0 ? {} : _this$config$listener;\n    var keys = Object.keys(listeners);\n\n    for (var i = 0; i < keys.length; i += 1) {\n      var p = keys[i];\n      this.events.on(p, listeners[p]);\n    }\n  }\n}\n/**\r\n * render\r\n * @access private\r\n */\n\n\nfunction render() {\n  var _this = this;\n\n  var _this$config$directio = this.config.direction,\n      direction = _this$config$directio === void 0 ? 'horizontal' : _this$config$directio;\n\n  if (this.swiper) {\n    this.swiper.destroy();\n  }\n\n  this.swiper = new _swiper[\"default\"](this.el, {\n    init: false,\n    // 初始化在第一个选项卡上\n    initialSlide: 1,\n    direction: direction,\n    slidesPerView: 'auto',\n    centeredSlides: false,\n    spaceBetween: 0\n  });\n  this.swiper.on('init', function () {\n    _this.events.trigger('init', _this);\n  });\n  this.swiper.on('slideChangeTransitionStart', function () {\n    _this.events.trigger('slideChangeTransitionStart', _this);\n  });\n  this.swiper.on('slideChangeTransitionEnd', function () {\n    _this.events.trigger('slideChangeTransitionEnd', _this);\n  });\n}\n/**\r\n * Swipeout\r\n * @class Swipeout\r\n * @classdesc Swipeout\r\n */\n\n\nvar Swipeout =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * constructor\r\n   * @constructor\r\n   * @param {HTMLElement} - el\r\n   * @param {Object} - config\r\n   */\n  function Swipeout(el, config) {\n    (0, _classCallCheck2[\"default\"])(this, Swipeout);\n    this.el = el;\n    this.config = Object.assign({}, config);\n    this.events = new _uiUtil.Events();\n    initEvents.call(this);\n    render.call(this);\n    this.swiper.init();\n  }\n  /**\r\n   * refresh\r\n   */\n\n\n  (0, _createClass2[\"default\"])(Swipeout, [{\n    key: \"refresh\",\n    value: function refresh() {\n      this.swiper.update();\n    }\n    /**\r\n     * changeDirection\r\n     * @param {String} - direction\r\n     */\n\n  }, {\n    key: \"changeDirection\",\n    value: function changeDirection(direction) {\n      this.swiper.changeDirection(direction);\n    }\n    /**\r\n     * slideBefore\r\n     */\n\n  }, {\n    key: \"slideBefore\",\n    value: function slideBefore() {\n      this.swiper.slideTo(0);\n    }\n    /**\r\n     * slideAfter\r\n     */\n\n  }, {\n    key: \"slideAfter\",\n    value: function slideAfter() {\n      this.swiper.slideTo(2);\n    }\n    /**\r\n     * close\r\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.swiper.slideTo(1);\n    }\n    /**\r\n     * destory\r\n     */\n\n  }, {\n    key: \"destory\",\n    value: function destory() {\n      this.clearAll();\n\n      if (this.swiper) {\n        this.swiper.destroy();\n      }\n    }\n    /**\r\n     * remove\r\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      this.destory();\n      this.el.parentElement.removeChild(this.el);\n    }\n    /**\r\n     * removeAnimation\r\n     * @param {HTMLElement} - el\r\n     */\n\n  }, {\n    key: \"removeAnimation\",\n    value: function removeAnimation(el) {\n      var self = this;\n\n      function onTransitionEnd() {\n        el.removeEventListener('transitionEnd', onTransitionEnd);\n        self.remove();\n      }\n\n      el.addEventListener('transitionEnd', onTransitionEnd);\n      var height = el.offsetHeight;\n      el.style.transition = 'height 300ms linear';\n      el.style.transform = 'translateZ(0)';\n      el.style.height = \"\".concat(height, \"px\");\n      setTimeout(function () {\n        el.style.height = 0;\n      }, 100);\n    }\n    /**\r\n     * on 注册事件\r\n     * @param {string} type\r\n     * @param {Function} handler\r\n     */\n\n  }, {\n    key: \"on\",\n    value: function on(type, handler) {\n      this.events.on(type, handler);\n    }\n    /**\r\n     * 删除指定type下的事件或清除所有\r\n     * @param {string} type\r\n     * @param {Function} handler\r\n     */\n\n  }, {\n    key: \"off\",\n    value: function off(type, handler) {\n      if (type) {\n        if (handler) {\n          this.events.remove(type, handler);\n        } else {\n          this.events.clear(type);\n        }\n      } else {\n        this.events.clearAll();\n      }\n    }\n    /**\r\n     * clearAll\r\n     */\n\n  }, {\n    key: \"clearAll\",\n    value: function clearAll() {\n      this.events.clearAll();\n    }\n  }]);\n  return Swipeout;\n}();\n/**\r\n * SwipeoutFactory\r\n */\n\n\nvar SwipeoutFactory = {\n  /**\r\n   * 创建一个Swipeout\r\n   * @param {HtmlElement} - el\r\n   * @param {Object} - config\r\n   * @return {Swipeout} - Swipeout\r\n   */\n  create: function create(el, config) {\n    return new Swipeout(el, config);\n  }\n};\nvar _default = SwipeoutFactory;\nexports[\"default\"] = _default;"]}