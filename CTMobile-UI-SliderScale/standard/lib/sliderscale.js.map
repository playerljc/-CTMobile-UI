{"version":3,"sources":["sliderscale.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_classCallCheck2","_createClass2","_uiUtil","initVar","this","scaleEl","el","querySelector","rangeEl","init","_this$config","config","min","max","step","interval","setAttribute","df","document","createDocumentFragment","i","Dom6","createElement","classList","add","appendChild","concat","initEvents","self","addEventListener","touchEvent","call","dom","preValue","events","trigger","SliderScale","assign","Events","key","type","handler","on","remove","clear","clearAll","SliderScaleFactory","create","tel","_default"],"mappings":"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","file":"sliderscale.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _uiUtil = require(\"@ctmobile/ui-util\");\n\n/**\r\n * initVar\r\n * @access private\r\n */\nfunction initVar() {\n  this.scaleEl = this.el.querySelector('.scale');\n  this.rangeEl = this.el.querySelector(\"input[type='range']\");\n}\n/**\r\n * init\r\n * @access private\r\n */\n\n\nfunction init() {\n  var _this$config = this.config,\n      min = _this$config.min,\n      max = _this$config.max,\n      value = _this$config.value,\n      step = _this$config.step,\n      interval = _this$config.interval;\n  this.rangeEl.setAttribute('min', min);\n  this.rangeEl.setAttribute('max', max);\n  this.rangeEl.setAttribute('step', step);\n  this.rangeEl.setAttribute('value', value);\n  var df = document.createDocumentFragment();\n\n  for (var i = min; i < max; i++) {\n    if (max - 1 === min) {\n      break;\n    }\n\n    var scaleEl = _uiUtil.Dom6.createElement('<div></div>');\n\n    scaleEl.classList.add('scaleItem');\n\n    if ((i + 1) % interval === 0) {\n      scaleEl.classList.add('point');\n      scaleEl.appendChild(_uiUtil.Dom6.createElement(\"<span class='value'>\".concat(i + 1, \"</span>\")));\n    }\n\n    if (i === min) {\n      scaleEl.appendChild(_uiUtil.Dom6.createElement(\"<span class='value'>\".concat(min, \"</span>\")));\n    }\n\n    if ((i + 1) % interval !== 0 && i === max - 1) {\n      scaleEl.appendChild(_uiUtil.Dom6.createElement(\"<span class='value'>\".concat(i + 1, \"</span>\")));\n    }\n\n    df.appendChild(scaleEl);\n  }\n\n  if (min === max) {\n    this.scaleEl.appendChild(_uiUtil.Dom6.createElement(\"<div class='scaleItem'>\\n        <span class='value'>0</span>\\n        <span class='value' style='right:0;left: auto;'>\".concat(max, \"</span>\\n       </div>\")));\n  } else if (max - 1 === min) {\n    this.scaleEl.appendChild(_uiUtil.Dom6.createElement(\"<div class='scaleItem'>\\n        <span class='value'>\".concat(min, \"</span>\\n        <span class='value' style='right:0;left: auto;'>\").concat(max, \"</span>\\n       </div>\")));\n  }\n\n  this.scaleEl.appendChild(df);\n}\n/**\r\n * initEvents\r\n * @access private\r\n */\n\n\nfunction initEvents() {\n  var self = this;\n  this.rangeEl.addEventListener('mousemove', function () {\n    touchEvent.call(self, this);\n  });\n  this.rangeEl.addEventListener('touchmove', function () {\n    touchEvent.call(self, this);\n  });\n}\n/**\r\n * toychEvent\r\n * @access private\r\n * @param {HTMLElement} dom\r\n */\n\n\nfunction touchEvent(dom) {\n  var self = this;\n\n  if (self.preValue !== dom.value) {\n    self.preValue = dom.value;\n    self.events.trigger('change', {\n      value: dom.value,\n      el: self.el\n    });\n  }\n}\n/**\r\n * SliderScale\r\n * @class SliderScale\r\n * @classdesc SliderScale\r\n */\n\n\nvar SliderScale =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * constructor\r\n   * @constructor\r\n   * @param {HTMLElement} el\r\n   * @param {Object} config\r\n   */\n  function SliderScale(el, config) {\n    (0, _classCallCheck2.default)(this, SliderScale);\n    this.el = el;\n    this.config = Object.assign({\n      min: 0,\n      max: 100,\n      step: 1,\n      value: 0,\n      interval: 5\n    }, config);\n    this.events = new _uiUtil.Events();\n    initVar.call(this);\n    init.call(this);\n    initEvents.call(this);\n  }\n  /**\r\n   * setValue\r\n   * @param {String} value\r\n   */\n\n\n  (0, _createClass2.default)(SliderScale, [{\n    key: \"setValue\",\n    value: function setValue(value) {\n      this.rangeEl.value = value;\n    }\n    /**\r\n     * getValue\r\n     * @return {String}\r\n     */\n\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      return this.rangeEl.value;\n    }\n    /**\r\n     * on 注册事件\r\n     * @param {string} type\r\n     * @param {Function} handler\r\n     */\n\n  }, {\n    key: \"on\",\n    value: function on(type, handler) {\n      this.events.on(type, handler);\n    }\n    /**\r\n     * 删除指定type下的事件或清除所有\r\n     * @param {string} type\r\n     * @param {Function} handler\r\n     */\n\n  }, {\n    key: \"off\",\n    value: function off(type, handler) {\n      if (type) {\n        if (handler) {\n          this.events.remove(type, handler);\n        } else {\n          this.events.clear(type);\n        }\n      } else {\n        this.events.clearAll();\n      }\n    }\n  }]);\n  return SliderScale;\n}();\n/**\r\n * SliderScaleFactory\r\n */\n\n\nvar SliderScaleFactory = {\n  /**\r\n   * 创建一个SliderScale\r\n   * @param {HtmlElement} - el\r\n   * @param {Object} - config\r\n   * @return {SliderScale} - SliderScale\r\n   */\n  create: function create(tel, config) {\n    return new SliderScale(tel, config);\n  }\n};\nvar _default = SliderScaleFactory;\nexports.default = _default;"]}