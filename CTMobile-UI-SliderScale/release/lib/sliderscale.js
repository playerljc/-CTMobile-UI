"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_uiUtil=require("@ctmobile/ui-util");function initVar(){this.scaleEl=this.el.querySelector(".scale"),this.rangeEl=this.el.querySelector("input[type='range']")}function init(){var e=this.config,t=e.min,a=e.max,l=e.value,i=e.step,n=e.interval;this.rangeEl.setAttribute("min",t),this.rangeEl.setAttribute("max",a),this.rangeEl.setAttribute("step",i),this.rangeEl.setAttribute("value",l);for(var s=document.createDocumentFragment(),r=t;r<a&&a-1!==t;r++){var u=_uiUtil.Dom6.createElement("<div></div>");u.classList.add("scaleItem"),(r+1)%n==0&&(u.classList.add("point"),u.appendChild(_uiUtil.Dom6.createElement("<span class='value'>".concat(r+1,"</span>")))),r===t&&u.appendChild(_uiUtil.Dom6.createElement("<span class='value'>".concat(t,"</span>"))),(r+1)%n!=0&&r===a-1&&u.appendChild(_uiUtil.Dom6.createElement("<span class='value'>".concat(r+1,"</span>"))),s.appendChild(u)}t===a?this.scaleEl.appendChild(_uiUtil.Dom6.createElement("<div class='scaleItem'>\n        <span class='value'>0</span>\n        <span class='value' style='right:0;left: auto;'>".concat(a,"</span>\n       </div>"))):a-1===t&&this.scaleEl.appendChild(_uiUtil.Dom6.createElement("<div class='scaleItem'>\n        <span class='value'>".concat(t,"</span>\n        <span class='value' style='right:0;left: auto;'>").concat(a,"</span>\n       </div>"))),this.scaleEl.appendChild(s)}function initEvents(){var e=this;this.rangeEl.addEventListener("mousemove",function(){touchEvent.call(e,this)}),this.rangeEl.addEventListener("touchmove",function(){touchEvent.call(e,this)})}function touchEvent(e){var t=this;t.preValue!==e.value&&(t.preValue=e.value,t.events.trigger("change",{value:e.value,el:t.el}))}var SliderScale=function(){function a(e,t){(0,_classCallCheck2.default)(this,a),this.el=e,this.config=Object.assign({min:0,max:100,step:1,value:0,interval:5},t),this.events=new _uiUtil.Events,initVar.call(this),init.call(this),initEvents.call(this)}return(0,_createClass2.default)(a,[{key:"setValue",value:function(e){this.rangeEl.value=e}},{key:"getValue",value:function(){return this.rangeEl.value}},{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"off",value:function(e,t){e?t?this.events.remove(e,t):this.events.clear(e):this.events.clearAll()}}]),a}(),SliderScaleFactory={create:function(e,t){return new SliderScale(e,t)}},_default=SliderScaleFactory;exports.default=_default;
//# sourceMappingURL=sliderscale.js.map
