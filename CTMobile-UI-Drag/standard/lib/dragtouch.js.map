{"version":3,"sources":["dragtouch.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_classCallCheck2","_createClass2","selectorPrefix","initEvents","initDragSourceEvent","call","this","_this","self","_self$config","config","_self$config$dragSour","dragSourceExtendClasses","onDragClone","onPutSuccess","_self$config$isDragSo","isDragSourceExist","_self$config$isDragSo2","isDragSourceDisplay","sourceEventHanlder","WeakMap","_loop","i","sourceEl","sourceEls","handlerEntry","createCloneEl","cloneEl","cloneNode","className","concat","join","style","border","handler","ev","isdown","rect","getBoundingClientRect","baseX","left","baseY","top","firstX","touches","clientX","firstY","clientY","setAttribute","minWidth","offsetWidth","minHeight","offsetHeight","position","zIndex","margin","document","body","appendChild","addEventListener","mousedown","ismove","visibility","curX","curY","getMoveInTargetEls","incrementX","incrementY","reset","moveInTargetEls","complete","length","cloneSourceEl","cursor","targetEls","right","bottom","width","height","x","y","parentElement","removeChild","goBack","section","set","_this2","completeResult","sectionResult","elRect","_this$config$dragTarg","dragTargetExtendClasses","_loop2","targetEl","targetsIndex","get","map","Class","classList","remove","push","t","_this$config$noDragRe","noDragReturnAnimate","setTimeout","onTransitionend","removeEventListener","transition","transform","_this$config$dragTarg2","_loop3","DragTouch","el","assign","querySelectorAll","key","sourceHandlerEntry","p","DragTouchFactory","create","_default"],"mappings":"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","file":"dragtouch.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar selectorPrefix = 'ct-drag-';\n/**\r\n * initEvents\r\n * @access private\r\n */\n\nfunction initEvents() {\n  initDragSourceEvent.call(this);\n}\n/**\r\n * initDragSourceEvent\r\n * @access private\r\n */\n\n\nfunction initDragSourceEvent() {\n  var _this = this;\n\n  var self = this;\n  var _self$config = self.config,\n      _self$config$dragSour = _self$config.dragSourceExtendClasses,\n      dragSourceExtendClasses = _self$config$dragSour === void 0 ? [] : _self$config$dragSour,\n      onDragClone = _self$config.onDragClone,\n      onPutSuccess = _self$config.onPutSuccess,\n      _self$config$isDragSo = _self$config.isDragSourceExist,\n      isDragSourceExist = _self$config$isDragSo === void 0 ? true : _self$config$isDragSo,\n      _self$config$isDragSo2 = _self$config.isDragSourceDisplay,\n      isDragSourceDisplay = _self$config$isDragSo2 === void 0 ? true : _self$config$isDragSo2;\n  self.sourceEventHanlder = new WeakMap(); // dragSource\n\n  var _loop = function _loop(i) {\n    var sourceEl = _this.sourceEls[i];\n    var handlerEntry = {}; // 点击 touchstart\n\n    sourceEl.addEventListener('touchstart', function () {\n      function createCloneEl() {\n        var cloneEl = sourceEl.cloneNode(true);\n\n        if (dragSourceExtendClasses) {\n          cloneEl.className += \" \".concat(dragSourceExtendClasses.join(' '));\n        } else {\n          cloneEl.style.border = '1px dashed black';\n        }\n\n        return cloneEl;\n      }\n\n      var handler = function handler(ev) {\n        self.isdown = true;\n        self.sourceEl = sourceEl;\n        var rect = sourceEl.getBoundingClientRect();\n        self.baseX = rect.left;\n        self.baseY = rect.top;\n        self.firstX = ev.touches[0].clientX;\n        self.firstY = ev.touches[0].clientY; // create CloneNode\n\n        if (onDragClone) {\n          self.cloneEl = onDragClone(sourceEl);\n\n          if (!self.cloneEl) {\n            self.cloneEl = createCloneEl();\n          }\n        } else {\n          self.cloneEl = createCloneEl();\n        }\n\n        self.cloneEl.setAttribute('id', '');\n        self.cloneEl.style.minWidth = \"\".concat(sourceEl.offsetWidth, \"px\");\n        self.cloneEl.style.minHeight = \"\".concat(sourceEl.offsetHeight, \"px\");\n        self.cloneEl.style.position = 'fixed';\n        self.cloneEl.style.zIndex = '9999';\n        self.cloneEl.style.left = \"\".concat(self.baseX, \"px\");\n        self.cloneEl.style.top = \"\".concat(self.baseY, \"px\");\n        self.cloneEl.style.margin = '0'; // append CloneNode\n\n        document.body.appendChild(self.cloneEl);\n      };\n\n      handlerEntry.mousedown = handler;\n      return handler;\n    }()); // sourceEl mousemove\n\n    sourceEl.addEventListener('touchmove', function (ev) {\n      if (!self.isdown) return false;\n\n      if (!self.ismove) {\n        self.ismove = true;\n\n        if (!isDragSourceDisplay || !isDragSourceExist) {\n          self.sourceEl.style.visibility = 'hidden';\n        }\n      }\n\n      var curX = ev.touches[0].clientX;\n      var curY = ev.touches[0].clientY; // 不是看curX和curY的值在不在targetEl里，而是看\n\n      getMoveInTargetEls.call(self);\n      var incrementX = curX - self.firstX;\n      var incrementY = curY - self.firstY;\n      self.cloneEl.style.left = \"\".concat(self.baseX + incrementX, \"px\");\n      self.cloneEl.style.top = \"\".concat(self.baseY + incrementY, \"px\");\n    }); // touchend\n\n    sourceEl.addEventListener('touchend', function () {\n      if (!self.ismove) {\n        reset.call(self);\n        return false;\n      }\n\n      var moveInTargetEls = getMoveInTargetEls.call(self);\n\n      if (moveInTargetEls.complete.length > 0) {\n        // 可以放\n        if (onPutSuccess) {\n          // 返给用的是原始节点克隆后的节点\n          var rect = self.cloneEl.getBoundingClientRect();\n          var cloneSourceEl = self.sourceEl.cloneNode(true);\n          cloneSourceEl.style.visibility = 'visible';\n          cloneSourceEl.style.cursor = 'default';\n          var isPut = onPutSuccess({\n            cloneSourceEl: cloneSourceEl,\n            sourceEl: sourceEl,\n            targetEls: moveInTargetEls.complete,\n            rect: {\n              left: rect.left,\n              right: rect.right,\n              top: rect.top,\n              bottom: rect.bottom,\n              width: rect.width,\n              height: rect.height,\n              x: rect.x,\n              y: rect.y\n            }\n          }); // 放了\n\n          if (isPut) {\n            if (!self.config.isDragSourceExist) {\n              if (self.sourceEl) {\n                self.sourceEl.parentElement.removeChild(self.sourceEl);\n                self.sourceEl = null;\n              }\n            }\n\n            reset.call(self, moveInTargetEls.complete);\n          } else {\n            // 没放\n            goBack.call(self, self.sourceEl, moveInTargetEls.complete);\n          }\n        }\n      } else {\n        // 不可以放\n        goBack.call(self, self.sourceEl, moveInTargetEls.section);\n      }\n    }); // 记录mousedonw,mouseenter,mouseover事件的句柄\n\n    self.sourceEventHanlder.set(sourceEl, handlerEntry);\n  };\n\n  for (var i = 0; i < this.sourceEls.length; i++) {\n    _loop(i);\n  }\n} // /**\n//  * createTargetsIndex\n//  * @access private\n//  */\n// function createTargetsIndex() {\n//   this.targetEls = document.querySelectorAll(`.${selectorPrefix}target`);\n//   this.targetsIndex = new WeakMap();\n//   for (let i = 0; i < this.targetEls.length; i++) {\n//     const targetEl = this.targetEls[i];\n//     this.targetsIndex.set(targetEl, targetEl.getBoundingClientRect());\n//   }\n// }\n\n/**\r\n * getMoveInTargetEls\r\n * @access private\r\n */\n\n\nfunction getMoveInTargetEls() {\n  var _this2 = this;\n\n  var completeResult = [];\n  var sectionResult = [];\n  var elRect = this.cloneEl.getBoundingClientRect();\n  var _this$config$dragTarg = this.config.dragTargetExtendClasses,\n      dragTargetExtendClasses = _this$config$dragTarg === void 0 ? [] : _this$config$dragTarg;\n\n  var _loop2 = function _loop2(i) {\n    var targetEl = _this2.targetEls[i];\n\n    var rect = _this2.targetsIndex.get(targetEl);\n\n    if ((elRect.left >= rect.left && elRect.left <= rect.right || elRect.right >= rect.left && elRect.right <= rect.right) && (elRect.top >= rect.top && elRect.top <= rect.bottom || elRect.bottom >= rect.top && elRect.bottom <= rect.bottom)) {\n      if (dragTargetExtendClasses) {\n        dragTargetExtendClasses.map(function (Class) {\n          if (Class) {\n            targetEl.classList.remove(Class);\n          }\n        });\n        targetEl.className += \" \".concat(dragTargetExtendClasses.join(' '));\n      } else {\n        targetEl.style.border = '2px dashed black';\n      } // 完全进入\n\n\n      if (elRect.left >= rect.left && elRect.left <= rect.right && elRect.right >= rect.left && elRect.right <= rect.right && elRect.top >= rect.top && elRect.top <= rect.bottom && elRect.bottom >= rect.top && elRect.bottom <= rect.bottom) {\n        completeResult.push(targetEl);\n      } else {\n        // 部分进入\n        sectionResult.push(targetEl);\n      }\n    } else if (dragTargetExtendClasses) {\n      dragTargetExtendClasses.map(function (t) {\n        if (t) {\n          targetEl.classList.remove(t);\n        }\n      });\n    } else {\n      targetEl.style.border = '0';\n    }\n  };\n\n  for (var i = 0; i < this.targetEls.length; i++) {\n    _loop2(i);\n  }\n\n  return {\n    complete: completeResult,\n    section: sectionResult\n  };\n}\n/**\r\n * goBack\r\n * @param {HTMLElement} - sourceEl\r\n * @param {HTMLElement} - targetEls\r\n */\n\n\nfunction goBack(sourceEl, targetEls) {\n  var self = this;\n  var _this$config$noDragRe = this.config.noDragReturnAnimate,\n      noDragReturnAnimate = _this$config$noDragRe === void 0 ? false : _this$config$noDragRe;\n\n  if (noDragReturnAnimate) {\n    setTimeout(function () {\n      self.isdown = false;\n\n      function onTransitionend() {\n        self.cloneEl.removeEventListener('transitionend', onTransitionend);\n        reset.call(self, targetEls);\n        sourceEl.style.visibility = 'visible';\n      }\n\n      self.cloneEl.addEventListener('transitionend', onTransitionend);\n      self.cloneEl.style.transition = 'all .25s ease-out';\n      self.cloneEl.style.transform = 'translateZ(0)';\n      var rect = sourceEl.getBoundingClientRect();\n      self.cloneEl.style.left = \"\".concat(rect.left, \"px\");\n      self.cloneEl.style.top = \"\".concat(rect.top, \"px\");\n    }, 100);\n  } else {\n    reset.call(self, targetEls);\n    sourceEl.style.visibility = 'visible';\n  }\n}\n/**\r\n * reset\r\n * @param {Array<HTMLElement>} - targetEls\r\n * @access private\r\n */\n\n\nfunction reset(targetEls) {\n  var self = this;\n  var _this$config$dragTarg2 = this.config.dragTargetExtendClasses,\n      dragTargetExtendClasses = _this$config$dragTarg2 === void 0 ? [] : _this$config$dragTarg2;\n\n  if (self.cloneEl) {\n    document.body.removeChild(self.cloneEl);\n  } // 删除targets的样式\n\n\n  if (targetEls && targetEls.length > 0) {\n    var _loop3 = function _loop3(i) {\n      if (dragTargetExtendClasses) {\n        dragTargetExtendClasses.map(function (Class) {\n          if (Class) {\n            targetEls[i].classList.remove(Class);\n          }\n        });\n      } else {\n        targetEls[i].style.border = '0';\n      }\n    };\n\n    for (var i = 0; i < targetEls.length; i++) {\n      _loop3(i);\n    }\n  }\n\n  self.isdown = false; // 是否按下了\n\n  self.ismove = false; // 是否移动了\n\n  self.baseX = null;\n  self.baseY = null; // 节点原始距离page的坐标\n\n  self.firstX = null;\n  self.firstY = null; // 第一次点击时page的坐标\n\n  self.cloneEl = null;\n  self.sourceEl = null;\n}\n/**\r\n * DragTouch\r\n * @class DragTouch\r\n * @classdesc DragTouch\r\n */\n\n\nvar DragTouch =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * constructor\r\n   * @constructor\r\n   * @param {HTMLElement} - el\r\n   * @param {Object} - config\r\n   */\n  function DragTouch(el, config) {\n    (0, _classCallCheck2[\"default\"])(this, DragTouch);\n    this.el = el;\n    this.config = Object.assign({}, config);\n    this.sourceEls = this.el.querySelectorAll(\".\".concat(selectorPrefix, \"source\"));\n    this.targetEls = this.el.querySelectorAll(\".\".concat(selectorPrefix, \"target\"));\n    this.config = Object.assign({}, config);\n    this.isdown = false; // 是否按下了\n\n    this.ismove = false; // 是否move了\n\n    this.baseX = null;\n    this.baseY = null; // 节点原始距离page的坐标\n\n    this.firstX = null;\n    this.firstY = null; // 第一次点击时page的坐标\n\n    this.cloneEl = null;\n    this.sourceEl = null;\n    initEvents.call(this); // createTargetsIndex.call(this);\n  }\n  /**\r\n   * refresh\r\n   */\n\n\n  (0, _createClass2[\"default\"])(DragTouch, [{\n    key: \"refresh\",\n    value: function refresh() {\n      for (var i = 0; i < this.sourceEls.length; i++) {\n        var sourceEl = this.sourceEls[i];\n        var sourceHandlerEntry = this.sourceEventHanlder.get(sourceEl);\n\n        for (var p in sourceHandlerEntry) {\n          sourceEl.removeEventListener(p, sourceHandlerEntry[p]);\n        }\n      }\n\n      this.sourceEls = document.querySelectorAll(\".\".concat(selectorPrefix, \"source\"));\n      this.targetEls = this.el.querySelectorAll(\".\".concat(selectorPrefix, \"target\"));\n      initDragSourceEvent.call(this); // createTargetsIndex.call(this);\n    }\n  }]);\n  return DragTouch;\n}();\n/**\r\n * DragTouchFactory\r\n */\n\n\nvar DragTouchFactory = {\n  /**\r\n   * 创建一个Drag\r\n   * @param {HtmlElement} - el\r\n   * @param {Object} - config\r\n   * @return {DragTouch} - DragTouch\r\n   */\n  create: function create(el, config) {\n    return new DragTouch(el, config);\n  }\n};\nvar _default = DragTouchFactory;\nexports[\"default\"] = _default;"]}