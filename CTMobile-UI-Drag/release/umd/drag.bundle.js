!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.drag=e():t.drag=e()}(window,function(){return function(t){var e={};function o(l){if(e[l])return e[l].exports;var n=e[l]={i:l,l:!1,exports:{}};return t[l].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,l){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:l})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(l,n,function(e){return t[e]}.bind(null,n));return l},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s="dTC2")}({PVIG:function(t,e){},bYmg:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},dTC2:function(t,e,o){"use strict";o.r(e);var l=o("bYmg"),n=o.n(l),i=o("p9oh"),s=o.n(i),r="ct-drag-",c=5;function a(){var t=this,e=this;u.call(e);var o=e.config,l=o.isDragSourceDisplay,n=void 0===l||l,i=o.isDragSourceExist,s=void 0===i||i,r=o.onBoundaryDetection,a=o.infinite,f=void 0!==a&&a;e.el.addEventListener("mousemove",function(t){if(!e.isdown)return!1;e.ismove||(e.ismove=!0,n&&s||(e.sourceEl.style.visibility="hidden"));var o=t.pageX,l=t.pageY,i=o-e.firstX,a=l-e.firstY,u=h.call(e);if(f)if(e.ismovecanput){var d=u.boundaryDetection[0].rect,p={left:!1,right:!1,top:!1,bottom:!1};e.baseX+i<d.left||e.baseX+i+e.cloneEl.offsetWidth>d.right?(e.baseX+i<d.left&&(e.cloneEl.style.left="".concat(d.left,"px"),p.left=!0),e.baseX+i+e.cloneEl.offsetWidth>d.right&&(e.cloneEl.style.top="".concat(d.right-e.cloneEl.offsetWidth,"px"),p.right=!0)):e.cloneEl.style.left="".concat(e.baseX+i,"px"),e.baseY+a<d.top||e.baseY+a+e.cloneEl.offsetHeight>d.bottom?(e.baseY+a<d.top&&(e.cloneEl.style.top="".concat(d.top,"px"),p.top=!0),e.baseY+a+e.cloneEl.offsetHeight>d.bottom&&(e.cloneEl.style.top="".concat(d.bottom-e.cloneEl.offsetHeight,"px"),p.bottom=!0)):e.cloneEl.style.top="".concat(e.baseY+a,"px"),p.left||p.right||p.top||p.bottom?r&&r(p,function(t,e){var o=t.top,l=t.bottom,n=t.left,i=t.right;o&&0!==e.scrollTop&&(e.scrollTop-c<0?e.scrollTop=0:e.scrollTop-=c);l&&e.scrollTop!==e.scrollHeight&&(e.scrollTop+c>e.scrollHeight?e.scrollTop=e.scrollerHeight:e.scrollTop+=c);n&&0!==e.scrollLeft&&(e.scrollLeft-c<0?e.scrollLeft=0:e.scrollLeft-=c);i&&e.scrollLeft!==e.scrollWidth&&(e.scrollLeft+c>e.scrollWidth?e.scrollLeft=e.scrollWidth:e.scrollLeft+=c)}.bind(e)):e.boundaryDetectionHandler&&(cancelAnimationFrame(e.boundaryDetectionHandler),e.boundaryDetectionHandler=null)}else u.complete.length>0?(e.ismovecanput=!0,console.log("ismovecanput = true"),e.cloneEl.style.cursor="pointer"):e.cloneEl.style.cursor="not-allowed",e.cloneEl.style.left="".concat(e.baseX+i,"px"),e.cloneEl.style.top="".concat(e.baseY+a,"px"),console.log("222");else u.complete.length>0?e.cloneEl.style.cursor="pointer":e.cloneEl.style.cursor="not-allowed",e.cloneEl.style.left="".concat(e.baseX+i,"px"),e.cloneEl.style.top="".concat(e.baseY+a,"px")}),e.el.addEventListener("mouseleave",function(){if(!e.isdown)return!1;d.call(e,t.sourceEl,t.targetEls)})}function u(){var t=this,e=this,o=e.config,l=o.dragSourceExtendClasses,n=void 0===l?[]:l,i=o.onDragClone,s=o.onSourceEnter,c=o.onSourceLeave,a=o.inclusionRelation,u=void 0===a||a;e.sourceEventHanlder=new WeakMap;for(var g=function(o){var l,a=t.sourceEls[o],g={};a.addEventListener("mousedown",function(){function t(){var t=a.cloneNode(!0);return n?t.className+=" ".concat(n.join(" ")):t.style.border="1px dashed black",t}var o=function(o){e.isdown=!0,e.sourceEl=a;var l=a.getBoundingClientRect();e.baseX=l.left,e.baseY=l.top,e.firstX=o.pageX,e.firstY=o.pageY,i?(e.cloneEl=i(a),e.cloneEl||(e.cloneEl=t())):e.cloneEl=t(),e.cloneEl.setAttribute("id",""),e.cloneEl.style.minWidth="".concat(a.offsetWidth,"px"),e.cloneEl.style.minHeight="".concat(a.offsetHeight,"px"),e.cloneEl.style.position="fixed",e.cloneEl.style.zIndex="9999",e.cloneEl.style.left="".concat(e.baseX,"px"),e.cloneEl.style.top="".concat(e.baseY,"px"),e.cloneEl.style.margin="0",e.cloneEl.addEventListener("mouseup",function(){if(!e.ismove)return p.call(e),!1;var t=h.call(e),o=[].concat(t.section,t.complete);if(t.complete.length>0)if(u)f.call(e,a,t);else{for(var l=t.complete,n=!1,i=0;i<l.length;i++){if(-1===Array.from(l[i].querySelectorAll(".".concat(r,"source"))).findIndex(function(t){return t===a})){n=!0;break}}n?f.call(e,a,t):d.call(e,a,o)}else d.call(e,a,o)}),e.el.appendChild(e.cloneEl)};return g.mousedown=o,o}()),a.addEventListener("mouseenter",(l=function(){a.style.cursor="move",s&&s(a)},g.mouseenter=l,l)),a.addEventListener("mouseleave",function(){var t=function(){a.style.cursor="default",c&&c(a)};return g.mouseover=t,t}()),e.sourceEventHanlder.set(a,g)},E=0;E<this.sourceEls.length;E++)g(E)}function f(t,e){var o=[].concat(e.section,e.complete),l=this.config,n=l.onPutSuccess,i=l.isDragSourceExist,s=void 0===i||i;if(n){var r=this.cloneEl.getBoundingClientRect(),c=t.cloneNode(!0);c.style.visibility="visible",c.style.cursor="default",n({cloneSourceEl:c,sourceEl:t,targetEls:e.complete,rect:{left:r.left,right:r.right,top:r.top,bottom:r.bottom,width:r.width,height:r.height,x:r.x,y:r.y},naturalRelease:{fn:g,context:this}})?(s||this.sourceEl&&(this.sourceEl.parentElement.removeChild(this.sourceEl),this.sourceEl=null),p.call(this,o)):d.call(this,t,o)}}function h(){for(var t=[],e=[],o=[],l=this.cloneEl.getBoundingClientRect(),n=this.config.dragTargetExtendClasses,i=void 0===n?[]:n,s=this.targetEls,r=function(n){var r=s[n],c=r.getBoundingClientRect();(l.left>=c.left&&l.left<=c.right||l.right>=c.left&&l.right<=c.right)&&(l.top>=c.top&&l.top<=c.bottom||l.bottom>=c.top&&l.bottom<=c.bottom)?(i?(i.map(function(t){t&&r.classList.remove(t)}),r.className+=" ".concat(i.join(" "))):r.style.border="2px dashed black",l.left>=c.left&&l.left<=c.right&&l.right>=c.left&&l.right<=c.right&&l.top>=c.top&&l.top<=c.bottom&&l.bottom>=c.top&&l.bottom<=c.bottom?t.push(r):e.push(r)):i?i.map(function(t){t&&r.classList.remove(t)}):r.style.border="0";var a={top:!1,bottom:!1,left:!1,right:!1};l.top<c.top&&(a.top=!0),l.bottom>c.bottom&&(a.bottom=!0),l.left<c.left&&(a.left=!0),l.right>c.right&&(a.right=!0),o.push({el:r,condition:a,rect:c})},c=0;c<s.length;c++)r(c);return{complete:t,section:e,boundaryDetection:o}}function d(t,e){var o=this,l=this.config.noDragReturnAnimate;void 0!==l&&l?setTimeout(function(){o.isdown=!1,o.cloneEl.addEventListener("transitionend",function l(){o.cloneEl.removeEventListener("transitionend",l),p.call(o,e),t.style.visibility="visible"}),o.cloneEl.style.transition="all .25s ease-out",o.cloneEl.style.transform="translateZ(0)";var l=t.getBoundingClientRect();o.cloneEl.style.left="".concat(l.left,"px"),o.cloneEl.style.top="".concat(l.top,"px")},100):(p.call(o,e),t.style.visibility="visible")}function p(t){var e=this.config.dragTargetExtendClasses,o=void 0===e?[]:e;if(this.cloneEl&&this.el.removeChild(this.cloneEl),t&&t.length>0)for(var l=function(e){o?o.map(function(o){o&&t[e].classList.remove(o)}):t[e].style.border="0"},n=0;n<t.length;n++)l(n);this.isdown=!1,this.ismove=!1,this.baseX=null,this.baseY=null,this.preX=null,this.preY=null,this.firstX=null,this.firstY=null,this.cloneEl=null,this.sourceEl=null,this.ismovecanput=!1,this.boundaryDetectionHandler&&(cancelAnimationFrame(this.boundaryDetectionHandler),this.boundaryDetectionHandler=null)}function g(t,e){var o=this.cloneEl.getBoundingClientRect(),l=o.left,n=o.top,i=t.getBoundingClientRect(),s=l-i.left,r=n-i.top;e.style.position="absolute",e.style.left="".concat(s,"px"),e.style.top="".concat(r,"px"),t.appendChild(e)}var E=function(){function t(e,o){n()(this,t),this.el=e,this.config=Object.assign({},o),this.sourceEls=this.el.querySelectorAll(".".concat(r,"source")),this.targetEls=this.el.querySelectorAll(".".concat(r,"target")),this.isdown=!1,this.ismove=!1,this.baseX=null,this.baseY=null,this.preX=null,this.preY=null,this.firstX=null,this.firstY=null,this.cloneEl=null,this.sourceEl=null,this.ismovecanput=!1,this.boundaryDetectionHandler=null,a.call(this)}return s()(t,[{key:"refresh",value:function(){for(var t=0;t<this.sourceEls.length;t++){var e=this.sourceEls[t],o=this.sourceEventHanlder.get(e);for(var l in o)e.removeEventListener(l,o[l])}this.sourceEls=this.el.querySelectorAll(".".concat(r,"source")),this.targetEls=this.el.querySelectorAll(".".concat(r,"target")),u.call(this)}}]),t}(),v={create:function(t,e){return new E(t,e)}},b="ct-drag-";function m(){var t=this,e=this,o=e.config,l=o.dragSourceExtendClasses,n=void 0===l?[]:l,i=o.onDragClone,s=o.onPutSuccess,r=o.isDragSourceExist,c=void 0===r||r,a=o.isDragSourceDisplay,u=void 0===a||a;e.sourceEventHanlder=new WeakMap;for(var f=function(o){var l=t.sourceEls[o],r={};l.addEventListener("touchstart",function(){function t(){var t=l.cloneNode(!0);return n?t.className+=" ".concat(n.join(" ")):t.style.border="1px dashed black",t}var o=function(o){e.isdown=!0,e.sourceEl=l;var n=l.getBoundingClientRect();e.baseX=n.left,e.baseY=n.top,e.firstX=o.touches[0].clientX,e.firstY=o.touches[0].clientY,i?(e.cloneEl=i(l),e.cloneEl||(e.cloneEl=t())):e.cloneEl=t(),e.cloneEl.setAttribute("id",""),e.cloneEl.style.minWidth="".concat(l.offsetWidth,"px"),e.cloneEl.style.minHeight="".concat(l.offsetHeight,"px"),e.cloneEl.style.position="fixed",e.cloneEl.style.zIndex="9999",e.cloneEl.style.left="".concat(e.baseX,"px"),e.cloneEl.style.top="".concat(e.baseY,"px"),e.cloneEl.style.margin="0",document.body.appendChild(e.cloneEl)};return r.mousedown=o,o}()),l.addEventListener("touchmove",function(t){if(!e.isdown)return!1;e.ismove||(e.ismove=!0,u&&c||(e.sourceEl.style.visibility="hidden"));var o=t.touches[0].clientX,l=t.touches[0].clientY;y.call(e);var n=o-e.firstX,i=l-e.firstY;e.cloneEl.style.left="".concat(e.baseX+n,"px"),e.cloneEl.style.top="".concat(e.baseY+i,"px")}),l.addEventListener("touchend",function(){if(!e.ismove)return Y.call(e),!1;var t=y.call(e);if(t.complete.length>0){if(s){var o=e.cloneEl.getBoundingClientRect(),n=e.sourceEl.cloneNode(!0);n.style.visibility="visible",n.style.cursor="default",s({cloneSourceEl:n,sourceEl:l,targetEls:t.complete,rect:{left:o.left,right:o.right,top:o.top,bottom:o.bottom,width:o.width,height:o.height,x:o.x,y:o.y}})?(e.config.isDragSourceExist||e.sourceEl&&(e.sourceEl.parentElement.removeChild(e.sourceEl),e.sourceEl=null),Y.call(e,t.complete)):x.call(e,e.sourceEl,t.complete)}}else x.call(e,e.sourceEl,t.section)}),e.sourceEventHanlder.set(l,r)},h=0;h<this.sourceEls.length;h++)f(h)}function y(){for(var t=this,e=[],o=[],l=this.cloneEl.getBoundingClientRect(),n=this.config.dragTargetExtendClasses,i=void 0===n?[]:n,s=function(n){var s=t.targetEls[n],r=t.targetsIndex.get(s);(l.left>=r.left&&l.left<=r.right||l.right>=r.left&&l.right<=r.right)&&(l.top>=r.top&&l.top<=r.bottom||l.bottom>=r.top&&l.bottom<=r.bottom)?(i?(i.map(function(t){t&&s.classList.remove(t)}),s.className+=" ".concat(i.join(" "))):s.style.border="2px dashed black",l.left>=r.left&&l.left<=r.right&&l.right>=r.left&&l.right<=r.right&&l.top>=r.top&&l.top<=r.bottom&&l.bottom>=r.top&&l.bottom<=r.bottom?e.push(s):o.push(s)):i?i.map(function(t){t&&s.classList.remove(t)}):s.style.border="0"},r=0;r<this.targetEls.length;r++)s(r);return{complete:e,section:o}}function x(t,e){var o=this,l=this.config.noDragReturnAnimate;void 0!==l&&l?setTimeout(function(){o.isdown=!1,o.cloneEl.addEventListener("transitionend",function l(){o.cloneEl.removeEventListener("transitionend",l),Y.call(o,e),t.style.visibility="visible"}),o.cloneEl.style.transition="all .25s ease-out",o.cloneEl.style.transform="translateZ(0)";var l=t.getBoundingClientRect();o.cloneEl.style.left="".concat(l.left,"px"),o.cloneEl.style.top="".concat(l.top,"px")},100):(Y.call(o,e),t.style.visibility="visible")}function Y(t){var e=this.config.dragTargetExtendClasses,o=void 0===e?[]:e;if(this.cloneEl&&document.body.removeChild(this.cloneEl),t&&t.length>0)for(var l=function(e){o?o.map(function(o){o&&t[e].classList.remove(o)}):t[e].style.border="0"},n=0;n<t.length;n++)l(n);this.isdown=!1,this.ismove=!1,this.baseX=null,this.baseY=null,this.firstX=null,this.firstY=null,this.cloneEl=null,this.sourceEl=null}var w=function(){function t(e,o){n()(this,t),this.el=e,this.config=Object.assign({},o),this.sourceEls=this.el.querySelectorAll(".".concat(b,"source")),this.targetEls=this.el.querySelectorAll(".".concat(b,"target")),this.config=Object.assign({},o),this.isdown=!1,this.ismove=!1,this.baseX=null,this.baseY=null,this.firstX=null,this.firstY=null,this.cloneEl=null,this.sourceEl=null,function(){m.call(this)}.call(this)}return s()(t,[{key:"refresh",value:function(){for(var t=0;t<this.sourceEls.length;t++){var e=this.sourceEls[t],o=this.sourceEventHanlder.get(e);for(var l in o)e.removeEventListener(l,o[l])}this.sourceEls=document.querySelectorAll(".".concat(b,"source")),this.targetEls=this.el.querySelectorAll(".".concat(b,"target")),m.call(this)}}]),t}(),L={create:function(t,e){return new w(t,e)}};o("PVIG");o.d(e,"DragFactory",function(){return v}),o.d(e,"DragTouchFactory",function(){return L})},p9oh:function(t,e){function o(t,e){for(var o=0;o<e.length;o++){var l=e[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}t.exports=function(t,e,l){return e&&o(t.prototype,e),l&&o(t,l),t}}})});