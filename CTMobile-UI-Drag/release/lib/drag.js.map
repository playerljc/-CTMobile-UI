{"version":3,"sources":["drag.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_classCallCheck2","_createClass2","selectorPrefix","initEvents","self","this","initDragSourceEvent","call","_self$config","config","_self$config$isDragSo","isDragSourceDisplay","_self$config$isDragSo2","isDragSourceExist","el","addEventListener","ev","isdown","ismove","sourceEl","style","visibility","curX","pageX","curY","pageY","console","log","getMoveInTargetEls","complete","length","cloneEl","cursor","incrementX","firstX","incrementY","firstY","left","concat","baseX","top","baseY","reset","_this","_self$config2","_self$config2$dragSou","dragSourceExtendClasses","onDragClone","onPutSuccess","onSourceEnter","onSourceLeave","_self$config2$isDragS","sourceEventHanlder","WeakMap","_loop","i","handler","sourceEls","handlerEntry","createCloneEl","cloneNode","className","join","border","rect","getBoundingClientRect","setAttribute","minWidth","offsetWidth","minHeight","offsetHeight","position","zIndex","margin","moveInTargetEls","cloneRect","cloneSourceEl","targetEls","right","bottom","width","height","x","y","parentElement","removeChild","goBack","section","appendChild","mousedown","mouseenter","mouseover","set","_this2","completeResult","sectionResult","elRect","_this$config$dragTarg","dragTargetExtendClasses","_loop2","targetEl","map","Class","classList","remove","push","t","_this$config$noDragRe","noDragReturnAnimate","setTimeout","onTransitionend","removeEventListener","transition","transform","_this$config$dragTarg2","_loop3","Drag","assign","querySelectorAll","key","sourceHandlerEntry","get","p","document","DragFactory","create","_default"],"mappings":"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","file":"drag.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar selectorPrefix = 'ct-drag-';\n/**\r\n * initEvents\r\n * @access private\r\n */\n\nfunction initEvents() {\n  var self = this;\n  initDragSourceEvent.call(self);\n  var _self$config = self.config,\n      _self$config$isDragSo = _self$config.isDragSourceDisplay,\n      isDragSourceDisplay = _self$config$isDragSo === void 0 ? true : _self$config$isDragSo,\n      _self$config$isDragSo2 = _self$config.isDragSourceExist,\n      isDragSourceExist = _self$config$isDragSo2 === void 0 ? true : _self$config$isDragSo2; // document.body mousemove\n\n  self.el.addEventListener('mousemove', function (ev) {\n    if (!self.isdown) return false;\n\n    if (!self.ismove) {\n      self.ismove = true;\n\n      if (!isDragSourceDisplay || !isDragSourceExist) {\n        self.sourceEl.style.visibility = 'hidden';\n      }\n    }\n\n    var curX = ev.pageX;\n    var curY = ev.pageY;\n    console.log(curX, curY); // 不是看curX和curY的值在不在targetEl里，而是看\n\n    var moveInTargetEls = getMoveInTargetEls.call(self);\n\n    if (moveInTargetEls.complete.length > 0) {\n      // 可以放置\n      self.cloneEl.style.cursor = 'pointer';\n    } else {\n      // 不可以放置\n      self.cloneEl.style.cursor = 'not-allowed';\n    }\n\n    var incrementX = curX - self.firstX;\n    var incrementY = curY - self.firstY;\n    self.cloneEl.style.left = \"\".concat(self.baseX + incrementX, \"px\");\n    self.cloneEl.style.top = \"\".concat(self.baseY + incrementY, \"px\");\n  }); // document.body mouseleave\n\n  self.el.addEventListener('mouseleave', function () {\n    if (!self.isdown) return false;\n    reset.call(self);\n  }); // window resize\n  // window.addEventListener('resize', () => {\n  //   createTargetsIndex.call(self);\n  // });\n}\n/**\r\n * initDragSourceEvent\r\n * @access private\r\n */\n\n\nfunction initDragSourceEvent() {\n  var _this = this;\n\n  var self = this;\n  var _self$config2 = self.config,\n      _self$config2$dragSou = _self$config2.dragSourceExtendClasses,\n      dragSourceExtendClasses = _self$config2$dragSou === void 0 ? [] : _self$config2$dragSou,\n      onDragClone = _self$config2.onDragClone,\n      onPutSuccess = _self$config2.onPutSuccess,\n      onSourceEnter = _self$config2.onSourceEnter,\n      onSourceLeave = _self$config2.onSourceLeave,\n      _self$config2$isDragS = _self$config2.isDragSourceExist,\n      isDragSourceExist = _self$config2$isDragS === void 0 ? true : _self$config2$isDragS;\n  self.sourceEventHanlder = new WeakMap(); // dragSource\n\n  var _loop = function _loop(i) {\n    var sourceEl = _this.sourceEls[i];\n    var handlerEntry = {}; // 点击 mousedown\n\n    sourceEl.addEventListener('mousedown', function () {\n      function createCloneEl() {\n        var cloneEl = sourceEl.cloneNode(true);\n\n        if (dragSourceExtendClasses) {\n          cloneEl.className += \" \".concat(dragSourceExtendClasses.join(' '));\n        } else {\n          cloneEl.style.border = '1px dashed black';\n        }\n\n        return cloneEl;\n      }\n\n      var handler = function handler(ev) {\n        self.isdown = true;\n        self.sourceEl = sourceEl;\n        var rect = sourceEl.getBoundingClientRect();\n        self.baseX = rect.left;\n        self.baseY = rect.top;\n        self.firstX = ev.pageX;\n        self.firstY = ev.pageY; // create CloneNode\n\n        if (onDragClone) {\n          self.cloneEl = onDragClone(sourceEl);\n\n          if (!self.cloneEl) {\n            self.cloneEl = createCloneEl();\n          }\n        } else {\n          self.cloneEl = createCloneEl();\n        }\n\n        self.cloneEl.setAttribute('id', '');\n        self.cloneEl.style.minWidth = \"\".concat(sourceEl.offsetWidth, \"px\");\n        self.cloneEl.style.minHeight = \"\".concat(sourceEl.offsetHeight, \"px\");\n        self.cloneEl.style.position = 'fixed';\n        self.cloneEl.style.zIndex = '9999';\n        self.cloneEl.style.left = \"\".concat(self.baseX, \"px\");\n        self.cloneEl.style.top = \"\".concat(self.baseY, \"px\");\n        self.cloneEl.style.margin = '0';\n        self.cloneEl.addEventListener('mouseup', function () {\n          if (!self.ismove) {\n            reset.call(self);\n            return false;\n          }\n\n          var moveInTargetEls = getMoveInTargetEls.call(self);\n\n          if (moveInTargetEls.complete.length > 0) {\n            // 可以放\n            if (onPutSuccess) {\n              // 返给用的是原始节点克隆后的节点\n              var cloneRect = self.cloneEl.getBoundingClientRect();\n              var cloneSourceEl = sourceEl.cloneNode(true);\n              cloneSourceEl.style.visibility = 'visible';\n              cloneSourceEl.style.cursor = 'default';\n              var isPut = onPutSuccess({\n                cloneSourceEl: cloneSourceEl,\n                sourceEl: sourceEl,\n                targetEls: moveInTargetEls.complete,\n                rect: {\n                  left: cloneRect.left,\n                  right: cloneRect.right,\n                  top: cloneRect.top,\n                  bottom: cloneRect.bottom,\n                  width: cloneRect.width,\n                  height: cloneRect.height,\n                  x: cloneRect.x,\n                  y: cloneRect.y\n                }\n              }); // 放了\n\n              if (isPut) {\n                if (!isDragSourceExist) {\n                  if (self.sourceEl) {\n                    self.sourceEl.parentElement.removeChild(self.sourceEl);\n                    self.sourceEl = null;\n                  }\n                }\n\n                reset.call(self, moveInTargetEls.complete);\n              } else {\n                // 没放\n                goBack.call(self, sourceEl, moveInTargetEls.complete);\n              }\n            }\n          } else {\n            // 不可以放\n            goBack.call(self, sourceEl, moveInTargetEls.section);\n          }\n        }); // append CloneNode\n\n        self.el.appendChild(self.cloneEl);\n      };\n\n      handlerEntry.mousedown = handler;\n      return handler;\n    }()); // 进入 mouseenter\n\n    sourceEl.addEventListener('mouseenter', function () {\n      var handler = function handler() {\n        sourceEl.style.cursor = 'move';\n\n        if (onSourceEnter) {\n          onSourceEnter(sourceEl);\n        }\n      };\n\n      handlerEntry.mouseenter = handler;\n      return handler;\n    }()); // 移出 mouseleave\n\n    sourceEl.addEventListener('mouseleave', function () {\n      var handler = function handler() {\n        sourceEl.style.cursor = 'default';\n\n        if (onSourceLeave) {\n          onSourceLeave(sourceEl);\n        }\n      };\n\n      handlerEntry.mouseover = handler;\n      return handler;\n    }()); // 记录mousedonw,mouseenter,mouseover事件的句柄\n\n    self.sourceEventHanlder.set(sourceEl, handlerEntry);\n  };\n\n  for (var i = 0; i < this.sourceEls.length; i++) {\n    _loop(i);\n  }\n} // /**\n//  * createTargetsIndex\n//  * @access private\n//  */\n// function createTargetsIndex() {\n//   this.targetEls = this.el.querySelectorAll(`.${selectorPrefix}target`);\n//   this.targetsIndex = new WeakMap();\n//   for (let i = 0; i < this.targetEls.length; i++) {\n//     const targetEl = this.targetEls[i];\n//     this.targetsIndex.set(targetEl, targetEl.getBoundingClientRect());\n//   }\n// }\n\n/**\r\n * getMoveInTargetEls\r\n * @access private\r\n */\n\n\nfunction getMoveInTargetEls() {\n  var _this2 = this;\n\n  var completeResult = [];\n  var sectionResult = [];\n  var elRect = this.cloneEl.getBoundingClientRect();\n  var _this$config$dragTarg = this.config.dragTargetExtendClasses,\n      dragTargetExtendClasses = _this$config$dragTarg === void 0 ? [] : _this$config$dragTarg;\n\n  var _loop2 = function _loop2(i) {\n    var targetEl = _this2.targetEls[i];\n    var rect = targetEl.getBoundingClientRect(); // this.targetsIndex.get();\n\n    if ((elRect.left >= rect.left && elRect.left <= rect.right || elRect.right >= rect.left && elRect.right <= rect.right) && (elRect.top >= rect.top && elRect.top <= rect.bottom || elRect.bottom >= rect.top && elRect.bottom <= rect.bottom)) {\n      if (dragTargetExtendClasses) {\n        dragTargetExtendClasses.map(function (Class) {\n          if (Class) {\n            targetEl.classList.remove(Class);\n          }\n        });\n        targetEl.className += \" \".concat(dragTargetExtendClasses.join(' '));\n      } else {\n        targetEl.style.border = '2px dashed black';\n      } // 完全进入\n\n\n      if (elRect.left >= rect.left && elRect.left <= rect.right && elRect.right >= rect.left && elRect.right <= rect.right && elRect.top >= rect.top && elRect.top <= rect.bottom && elRect.bottom >= rect.top && elRect.bottom <= rect.bottom) {\n        completeResult.push(targetEl);\n      } else {\n        // 部分进入\n        sectionResult.push(targetEl);\n      }\n    } else if (dragTargetExtendClasses) {\n      dragTargetExtendClasses.map(function (t) {\n        if (t) {\n          targetEl.classList.remove(t);\n        }\n      });\n    } else {\n      targetEl.style.border = '0';\n    }\n  };\n\n  for (var i = 0; i < this.targetEls.length; i++) {\n    _loop2(i);\n  }\n\n  return {\n    complete: completeResult,\n    section: sectionResult\n  };\n}\n/**\r\n * goBack\r\n * @param {HTMLElement} - sourceEl\r\n * @param {HTMLElement} - targetEls\r\n */\n\n\nfunction goBack(sourceEl, targetEls) {\n  var self = this;\n  var _this$config$noDragRe = this.config.noDragReturnAnimate,\n      noDragReturnAnimate = _this$config$noDragRe === void 0 ? false : _this$config$noDragRe;\n\n  if (noDragReturnAnimate) {\n    setTimeout(function () {\n      self.isdown = false;\n\n      function onTransitionend() {\n        self.cloneEl.removeEventListener('transitionend', onTransitionend);\n        reset.call(self, targetEls);\n        sourceEl.style.visibility = 'visible';\n      }\n\n      self.cloneEl.addEventListener('transitionend', onTransitionend);\n      self.cloneEl.style.transition = 'all .25s ease-out';\n      self.cloneEl.style.transform = 'translateZ(0)';\n      var rect = sourceEl.getBoundingClientRect();\n      self.cloneEl.style.left = \"\".concat(rect.left, \"px\");\n      self.cloneEl.style.top = \"\".concat(rect.top, \"px\");\n    }, 100);\n  } else {\n    reset.call(self, targetEls);\n    sourceEl.style.visibility = 'visible';\n  }\n}\n/**\r\n * reset\r\n * @param {Array<HTMLElement>} - targetEls\r\n * @access private\r\n */\n\n\nfunction reset(targetEls) {\n  var self = this;\n  var _this$config$dragTarg2 = this.config.dragTargetExtendClasses,\n      dragTargetExtendClasses = _this$config$dragTarg2 === void 0 ? [] : _this$config$dragTarg2;\n\n  if (self.cloneEl) {\n    self.el.removeChild(self.cloneEl);\n  } // 删除targets的样式\n\n\n  if (targetEls && targetEls.length > 0) {\n    var _loop3 = function _loop3(i) {\n      if (dragTargetExtendClasses) {\n        dragTargetExtendClasses.map(function (Class) {\n          if (Class) {\n            targetEls[i].classList.remove(Class);\n          }\n        });\n      } else {\n        targetEls[i].style.border = '0';\n      }\n    };\n\n    for (var i = 0; i < targetEls.length; i++) {\n      _loop3(i);\n    }\n  }\n\n  self.isdown = false; // 是否按下了\n\n  self.ismove = false; // 是否移动了\n\n  self.baseX = null;\n  self.baseY = null; // 节点原始距离page的坐标\n\n  self.firstX = null;\n  self.firstY = null; // 第一次点击时page的坐标\n\n  self.cloneEl = null;\n  self.sourceEl = null;\n}\n/**\r\n * Drag\r\n * @class Drag\r\n * @classdesc Drag\r\n */\n\n\nvar Drag =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * constructor\r\n   * @constructor\r\n   * @param {HTMLElement} - el\r\n   * @param {Object} - config\r\n   */\n  function Drag(el, config) {\n    (0, _classCallCheck2.default)(this, Drag);\n    this.el = el;\n    this.config = Object.assign({}, config);\n    this.sourceEls = this.el.querySelectorAll(\".\".concat(selectorPrefix, \"source\"));\n    this.targetEls = this.el.querySelectorAll(\".\".concat(selectorPrefix, \"target\"));\n    this.isdown = false; // 是否按下了\n\n    this.ismove = false; // 是否move了\n\n    this.baseX = null;\n    this.baseY = null; // 节点原始距离page的坐标\n\n    this.firstX = null;\n    this.firstY = null; // 第一次点击时page的坐标\n\n    this.cloneEl = null;\n    this.sourceEl = null;\n    initEvents.call(this); // createTargetsIndex.call(this);\n  }\n  /**\r\n   * refresh\r\n   */\n\n\n  (0, _createClass2.default)(Drag, [{\n    key: \"refresh\",\n    value: function refresh() {\n      for (var i = 0; i < this.sourceEls.length; i++) {\n        var sourceEl = this.sourceEls[i];\n        var sourceHandlerEntry = this.sourceEventHanlder.get(sourceEl);\n\n        for (var p in sourceHandlerEntry) {\n          sourceEl.removeEventListener(p, sourceHandlerEntry[p]);\n        }\n      }\n\n      this.sourceEls = document.querySelectorAll(\".\".concat(selectorPrefix, \"source\"));\n      this.targetEls = this.el.querySelectorAll(\".\".concat(selectorPrefix, \"target\"));\n      initDragSourceEvent.call(this); // createTargetsIndex.call(this);\n    }\n  }]);\n  return Drag;\n}();\n/**\r\n * DragFactory\r\n */\n\n\nvar DragFactory = {\n  /**\r\n   * 创建一个Drag\r\n   * @param {HtmlElement} - el\r\n   * @param {Object} - config\r\n   * @return {Drag} - Drag\r\n   */\n  create: function create(el, config) {\n    return new Drag(el, config);\n  }\n};\nvar _default = DragFactory;\nexports.default = _default;"]}