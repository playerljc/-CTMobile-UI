{"version":3,"sources":["treenode.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_classCallCheck2","_createClass2","_uiUtil","selectorPrefix","normalTriggerIcon","remoteTriggerIcon","checkboxIcon","checkall","uncheckall","unchecked","radioIcon","checked","initVar","this","itemEl","el","querySelector","concat","itemTriggerEl","itemIconEl","itemLabelEl","itemTextEl","itemInputEl","itemInputFieldEl","childrenEl","initEvents","_this","loadType","config","addEventListener","extend","_expand","call","isExpand","isload","lock","changeRemoteIcon","events","trigger","onLoadRemoteSuccess","bind","onLoadRemoteError","onLoadRemoteComplete","isChecked","getType","_checked","isCheckboxType","isLeaf","i","childrenNodes","length","Dom6","removeClass","addClass","getChildrenPaddingLeft","_this$config","leaf","type","icon","paddingLeft","changeNormalIcon","expaned","children","nodeGlobalConfig","nodeConfig","tree","renderChildren","parentNode","globalConfig","refresh","renderInput","_this$config2","_this$config2$checked","renderCheckboxCheckAll","renderCheckboxUncheckall","renderCheckboxUnchecked","render","_this$config3","label","iconColor","_this$config3$attr","attr","createElement","objectToDataSet","TreeNode","_ref","JSON","parse","stringify","assign","_this$config4","_this$config4$expand","expand","key","treeNode","arguments","undefined","style","appendChild","getEl","push","newNode","append","prepend","unshift","index","findIndex","n","insertBefore","splice","insertAfter","replaceChild","replaceNode","remove","dataset","getAttr","innerText","newIcon","self","_this$config5","srcIcon","createIcon","color","indexOf","checkboxNodes","checkeds","filter","node","checkboxDrillUp","getParentNode","childrens","detailItemInputsRecursive","check","_default"],"mappings":"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","file":"treenode.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _uiUtil = require(\"@ctmobile/ui-util\");\n\nvar selectorPrefix = 'ct-tree-';\nvar normalTriggerIcon = 'fa fa-caret-right';\nvar remoteTriggerIcon = 'fa fa-spinner';\nvar checkboxIcon = {\n  checkall: 'check-square',\n  // checkbox选中\n  uncheckall: 'minus-square',\n  // checkbox减号\n  unchecked: 'square-o' // checkbox默认\n\n};\nvar radioIcon = {\n  checked: 'circle',\n  //  radio选中\n  unchecked: 'circle-o' // radio未选中\n\n};\n/**\r\n * initVar\r\n * @access private\r\n */\n\nfunction initVar() {\n  this.itemEl = this.el.querySelector(\".\".concat(selectorPrefix, \"item\"));\n  this.itemTriggerEl = this.itemEl.querySelector(\".\".concat(selectorPrefix, \"item-trigger\"));\n  this.itemIconEl = this.itemEl.querySelector(\".\".concat(selectorPrefix, \"item-icon\"));\n  this.itemLabelEl = this.itemEl.querySelector(\".\".concat(selectorPrefix, \"item-label\"));\n  this.itemTextEl = this.itemLabelEl.querySelector(\".\".concat(selectorPrefix, \"item-text\"));\n  this.itemInputEl = this.itemEl.querySelector(\".\".concat(selectorPrefix, \"item-input\"));\n  this.itemInputFieldEl = this.itemEl.querySelector(\".\".concat(selectorPrefix, \"item-input-field\"));\n  this.childrenEl = this.el.querySelector(\".\".concat(selectorPrefix, \"children\"));\n}\n/**\r\n * initEvents\r\n * @access private\r\n */\n\n\nfunction initEvents() {\n  var _this = this;\n\n  var loadType = this.config.loadType;\n\n  if (this.itemTriggerEl) {\n    // expand\n    this.itemTriggerEl.addEventListener('click', function () {\n      // 展开\n      if (!_this.extend) {\n        if (loadType === 'remote') {\n          if (_this.isload) {\n            _expand.call(_this, !_this.isExpand);\n          } else {\n            if (_this.lock) return false;\n            _this.lock = true; // 先loading\n\n            changeRemoteIcon.call(_this);\n\n            _this.events.trigger('loadRemote', _this, onLoadRemoteSuccess.bind(_this), onLoadRemoteError.bind(_this), onLoadRemoteComplete.bind(_this));\n          }\n        } else {\n          _expand.call(_this, !_this.isExpand);\n        }\n      } else {\n        _expand.call(_this, !_this.isExpand);\n      }\n    });\n  } // 点击了label\n\n\n  this.itemLabelEl.addEventListener('click', function () {\n    _this.events.trigger('click', _this);\n  }); // 点击了checkbox\n\n  if (this.itemInputEl) {\n    this.itemInputEl.addEventListener('click', function () {\n      if (_this.isChecked()) {\n        if (_this.getType() === 'checkbox') {\n          _this.checked(false);\n        }\n      } else if (_this.getType() === 'checkbox') {\n        _this.checked(true);\n      }\n    });\n  }\n}\n/**\r\n * checked\r\n * @param {boolean} - checked\r\n * @access private\r\n */\n\n\nfunction _checked(checked) {\n  if (this.isCheckboxType()) {\n    if (this.getType() === 'checkbox') {\n      this.itemInputFieldEl.checked = checked;\n\n      if (!this.isLeaf()) {\n        for (var i = 0; i < this.childrenNodes.length; i++) {\n          var treeNode = this.childrenNodes[i];\n          treeNode.checked(checked);\n        }\n      }\n    }\n  }\n}\n/**\r\n * changeRemoteIcon\r\n * @access private\r\n */\n\n\nfunction changeRemoteIcon() {\n  _uiUtil.Dom6.removeClass(this.itemTriggerEl, normalTriggerIcon);\n\n  _uiUtil.Dom6.addClass(this.itemTriggerEl, \"\".concat(remoteTriggerIcon, \" animation\"));\n}\n/**\r\n * getChildrenPaddingLeft\r\n * @access private\r\n * @return {number}\r\n */\n\n\nfunction getChildrenPaddingLeft() {\n  var _this$config = this.config,\n      leaf = _this$config.leaf,\n      type = _this$config.type,\n      icon = _this$config.icon;\n  var paddingLeft = 4;\n\n  if (!leaf) {\n    paddingLeft += 22;\n  }\n\n  if (type !== 'normal') {\n    if (icon) {\n      paddingLeft += 19;\n    } else {\n      paddingLeft += 22;\n    }\n  } else if (icon) {\n    paddingLeft += 19;\n  } // item-trigger 22\n  // item-input 22\n  // item-icon 19\n  // 4\n\n\n  return paddingLeft;\n}\n/**\r\n * changeNormalIcon\r\n * @access private\r\n */\n\n\nfunction changeNormalIcon() {\n  _uiUtil.Dom6.removeClass(this.itemTriggerEl, \"\".concat(remoteTriggerIcon, \" animation\"));\n\n  _uiUtil.Dom6.addClass(this.itemTriggerEl, normalTriggerIcon);\n}\n/**\r\n * expand\r\n * @param {Boolean} - expand\r\n * @access private\r\n */\n\n\nfunction _expand(expaned) {\n  if (this.isLeaf()) return false;\n  if (this.isExpand === expaned) return false;\n\n  if (expaned) {\n    _uiUtil.Dom6.addClass(this.el, 'expand');\n  } else {\n    _uiUtil.Dom6.removeClass(this.el, 'expand');\n  }\n\n  this.isExpand = expaned;\n  this.events.trigger('expand', this, this.isExpand);\n}\n/**\r\n * onLoadRemote\r\n * @param {Array} - children\r\n * @access private\r\n */\n\n\nfunction onLoadRemoteSuccess(children) {\n  var nodeGlobalConfig = this.nodeGlobalConfig,\n      nodeConfig = this.nodeConfig;\n  if (children.length <= 0) return false; // 清空之前的\n\n  this.childrenNodes = [];\n  nodeConfig.children = children;\n  this.tree.renderChildren({\n    parentNode: this,\n    globalConfig: nodeGlobalConfig,\n    config: nodeConfig\n  });\n\n  _expand.call(this, true);\n\n  changeNormalIcon.call(this);\n  this.isload = true;\n  this.refresh();\n  this.lock = false;\n}\n/**\r\n * onLoadRemoteError\r\n * @access private\r\n */\n\n\nfunction onLoadRemoteError() {\n  changeNormalIcon.call(this);\n  this.lock = false;\n}\n/**\r\n * onLoadRemoteComplete\r\n * @access private\r\n */\n\n\nfunction onLoadRemoteComplete() {\n  changeNormalIcon.call(this);\n  this.lock = false;\n}\n/**\r\n * renderInput\r\n * @access private\r\n * @return {String}\r\n */\n\n\nfunction renderInput() {\n  var _this$config2 = this.config,\n      type = _this$config2.type,\n      _this$config2$checked = _this$config2.checked,\n      checked = _this$config2$checked === void 0 ? false : _this$config2$checked,\n      leaf = _this$config2.leaf; // 普通的节点\n\n  if (type === 'normal') {\n    return '';\n  } else if (type === 'checkbox') {\n    // checkbox节点\n    // 选中\n    // if(isLeaf() && checked) {\n    //   渲染成选中\n    //   if(父节点的所有checkbox节点都选中) {\n    //     父节点渲染成选中状态 - 一直向上追溯\n    //   }\n    // }\n    // let str;\n    // // 叶子节点\n    // if (this.isLeaf()) {\n    //   if (checked) {\n    //     // 叶子节点且选中\n    //     str = `<span class=\"${selectorPrefix}item-input fa fa-${checkboxIcon.checkall}\" >\n    //             <input class=\"${selectorPrefix}item-input-field\" checked type=\"checkbox\" />\n    //            </span>`;\n    //     //   if(父节点的所有checkbox节点都选中) {\n    //     //     父节点渲染成选中状态 - 一直向上追溯\n    //     //   }\n    //     // Drill up\n    //     if (this.parentNode) {\n    //       this.parentNode.checkboxDrillUp();\n    //     }\n    //   } else {\n    //     // 叶子节点非选中\n    //     str = `<span class=\"${selectorPrefix}item-input fa fa-${checkboxIcon.unchecked}\" >\n    //             <input class=\"${selectorPrefix}item-input-field\" type=\"checkbox\" />\n    //            </span>`;\n    //   }\n    // } else {\n    //   // 非叶子节点\n    //   str = `<span class=\"${selectorPrefix}item-input fa fa-${checkboxIcon.unchecked}\" >\n    //           <input class=\"${selectorPrefix}item-input-field\" type=\"checkbox\" />\n    //          </span>`;\n    // }\n    var str = '';\n\n    if (leaf) {\n      if (checked) {\n        str = \"<span class=\\\"\".concat(selectorPrefix, \"item-input fa fa-\").concat(checkboxIcon.checkall, \"\\\" >\\n              <input class=\\\"\").concat(selectorPrefix, \"item-input-field\\\" checked type=\\\"checkbox\\\" />\\n             </span>\");\n      } else {\n        str = \"<span class=\\\"\".concat(selectorPrefix, \"item-input fa fa-\").concat(checkboxIcon.unchecked, \"\\\" >\\n              <input class=\\\"\").concat(selectorPrefix, \"item-input-field\\\" type=\\\"checkbox\\\" />\\n             </span>\");\n      }\n    } else {\n      str = \"<span class=\\\"\".concat(selectorPrefix, \"item-input fa fa-\").concat(checkboxIcon.unchecked, \"\\\" >\\n              <input class=\\\"\").concat(selectorPrefix, \"item-input-field\\\" type=\\\"checkbox\\\" />\\n             </span>\");\n    }\n\n    return str;\n  } else if (type === 'radio') {\n    // radio节点\n    return \"<span class=\\\"\".concat(selectorPrefix, \"item-input fa fa-\").concat(radioIcon.unchecked, \"\\\" >\\n             <input class=\\\"\").concat(selectorPrefix, \"item-input-field\\\" type=\\\"checkbox\\\" />\\n            </span>\");\n  } else {\n    // 没有匹配的类型\n    return '';\n  }\n}\n/**\r\n * renderCheckboxCheckAll\r\n * @access private\r\n */\n\n\nfunction renderCheckboxCheckAll() {\n  _uiUtil.Dom6.removeClass(this.itemInputEl, \"fa-\".concat(checkboxIcon.uncheckall, \" fa-\").concat(checkboxIcon.unchecked));\n\n  _uiUtil.Dom6.addClass(this.itemInputEl, \"fa-\".concat(checkboxIcon.checkall));\n}\n/**\r\n * renderCheckboxUncheckall\r\n * @access private\r\n */\n\n\nfunction renderCheckboxUncheckall() {\n  _uiUtil.Dom6.removeClass(this.itemInputEl, \"fa-\".concat(checkboxIcon.checkall, \" fa-\").concat(checkboxIcon.unchecked));\n\n  _uiUtil.Dom6.addClass(this.itemInputEl, \"fa-\".concat(checkboxIcon.uncheckall));\n}\n/**\r\n * renderCheckboxUnchecked\r\n * @access private\r\n */\n\n\nfunction renderCheckboxUnchecked() {\n  _uiUtil.Dom6.removeClass(this.itemInputEl, \"fa-\".concat(checkboxIcon.checkall, \" fa-\").concat(checkboxIcon.uncheckall));\n\n  _uiUtil.Dom6.addClass(this.itemInputEl, \"fa-\".concat(checkboxIcon.unchecked));\n}\n/**\r\n * render\r\n * @access private\r\n */\n\n\nfunction render() {\n  var _this$config3 = this.config,\n      label = _this$config3.label,\n      leaf = _this$config3.leaf,\n      icon = _this$config3.icon,\n      iconColor = _this$config3.iconColor,\n      _this$config3$attr = _this$config3.attr,\n      attr = _this$config3$attr === void 0 ? {} : _this$config3$attr;\n  this.el = _uiUtil.Dom6.createElement(\"<div class=\\\"\".concat(selectorPrefix, \"node \").concat(this.isExpand ? 'expand' : '', \"\\\">\\n        <div class=\\\"\").concat(selectorPrefix, \"item\\\">\\n          <span class=\\\"\").concat(selectorPrefix, \"item-trigger \").concat(leaf ? 'invisible' : '', \" \").concat(normalTriggerIcon, \"\\\"></span>\\n          \").concat(renderInput.call(this), \"\\n          <span class=\\\"\").concat(selectorPrefix, \"item-icon fa fa-\").concat(icon, \" \").concat(!icon ? 'invisible' : '', \"\\\" style=\\\"color:\").concat(iconColor || '', \"\\\"></span>\\n          <span class=\\\"\").concat(selectorPrefix, \"item-label\\\">\\n            <span class=\\\"\").concat(selectorPrefix, \"item-text\\\">\").concat(label, \"</span>\\n          </span>\\n        </div>\\n      </div>\\n    \"));\n\n  _uiUtil.Dom6.objectToDataSet(attr, this.el);\n\n  initVar.call(this);\n  initEvents.call(this);\n}\n/**\r\n * TreeNode\r\n * @class TreeNode\r\n * @classdesc TreeNode\r\n */\n\n\nvar TreeNode =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * constructor\r\n   * @constructor\r\n   * @param {Object} - globalConfig 全局的节点配置\r\n   * @param {Object} - config 节点的配置\r\n   * @param {Tree} - tree Tree\r\n   * @param {TreeNode} - parentNode 父节点\r\n   */\n  function TreeNode(_ref) {\n    var globalConfig = _ref.globalConfig,\n        config = _ref.config,\n        tree = _ref.tree,\n        parentNode = _ref.parentNode;\n    (0, _classCallCheck2.default)(this, TreeNode);\n    this.nodeGlobalConfig = JSON.parse(JSON.stringify(globalConfig));\n    this.nodeConfig = JSON.parse(JSON.stringify(config));\n    this.config = JSON.parse(JSON.stringify(Object.assign({}, globalConfig, config)));\n    this.tree = tree;\n    this.parentNode = parentNode; // 子节点\n\n    this.childrenNodes = []; // 如果loadType==='remote'时，判断是否加载过数据\n\n    this.isload = false; // 如果loadType==='remote'时，的节流锁\n\n    this.lock = false;\n    this.events = tree.events;\n    var _this$config4 = this.config,\n        _this$config4$expand = _this$config4.expand,\n        expand = _this$config4$expand === void 0 ? true : _this$config4$expand,\n        loadType = _this$config4.loadType; // 节点是否展开\n\n    this.isExpand = loadType === 'remote' ? false : expand;\n    render.call(this);\n  }\n  /**\r\n   * append\r\n   * tree是一个完整的对象，已经调用完renderChildren\r\n   * @param {TreeNode} - treeNode\r\n   * @param {boolean} - refresh\r\n   */\n\n\n  (0, _createClass2.default)(TreeNode, [{\n    key: \"append\",\n    value: function append(treeNode) {\n      var refresh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var loadType = this.config.loadType;\n\n      if (this.isLeaf()) {\n        this.childrenEl = _uiUtil.Dom6.createElement('<div class=\"ct-tree-children\"></div>');\n        var paddingLeft = getChildrenPaddingLeft.call(this);\n        this.childrenEl.style.paddingLeft = \"\".concat(paddingLeft, \"px\");\n        this.el.appendChild(this.childrenEl); // if (loadType !== 'remote') {\n        //   this.itemTriggerEl = Dom6.createElement(`<span class=\"${selectorPrefix}item-trigger ${normalTriggerIcon}\"></span>`);\n        //   Dom6.prepend(this.itemEl, this.itemTriggerEl);\n        // }\n      }\n\n      this.childrenEl.appendChild(treeNode.getEl());\n      this.childrenNodes.push(treeNode);\n\n      _uiUtil.Dom6.removeClass(this.itemTriggerEl, 'invisible');\n\n      if (loadType === 'remote' && !this.isload) {\n        this.isload = true;\n      }\n\n      if (refresh) {\n        this.refresh();\n      }\n    }\n    /**\r\n     * appendByConfig\r\n     * @param {Object} - config\r\n     */\n\n  }, {\n    key: \"appendByConfig\",\n    value: function appendByConfig(config) {\n      var globalConfig = this.nodeGlobalConfig;\n      var newNode = new TreeNode({\n        globalConfig: globalConfig,\n        config: config,\n        tree: this.tree,\n        parentNode: this\n      });\n      this.tree.renderChildren({\n        parentNode: newNode,\n        globalConfig: globalConfig,\n        config: config\n      });\n      this.append(newNode);\n      this.refresh();\n    }\n    /**\r\n     * prepend\r\n     * @param {TreeNode} - treeNode\r\n     */\n\n  }, {\n    key: \"prepend\",\n    value: function prepend(treeNode) {\n      if (this.isLeaf()) this.append(treeNode);\n\n      _uiUtil.Dom6.prepend(this.childrenEl, treeNode.getEl());\n\n      this.childrenNodes.unshift(treeNode);\n      this.refresh();\n    }\n    /**\r\n     * prependByConfig\r\n     * @param {Object} - config\r\n     */\n\n  }, {\n    key: \"prependByConfig\",\n    value: function prependByConfig(config) {\n      var globalConfig = this.nodeGlobalConfig;\n      var newNode = new TreeNode({\n        globalConfig: globalConfig,\n        config: config,\n        tree: this.tree,\n        parentNode: this\n      });\n      this.tree.renderChildren({\n        parentNode: newNode,\n        globalConfig: globalConfig,\n        config: config\n      });\n      this.prepend(newNode);\n    }\n    /**\r\n     * insertBefore\r\n     * @param {TreeNode} - treeNode\r\n     * @param {TreeNode} - newNode\r\n     */\n\n  }, {\n    key: \"insertBefore\",\n    value: function insertBefore(treeNode, newNode) {\n      if (!treeNode || !newNode) return false;\n      var index = this.childrenNodes.findIndex(function (n) {\n        return n === treeNode;\n      });\n\n      if (index === -1) {\n        this.append(newNode);\n        this.refresh();\n      } else if (index === 0) {\n        this.prepend(newNode);\n      } else {\n        // dom\n        this.childrenEl.insertBefore(newNode.getEl(), treeNode.getEl()); // array\n\n        this.childrenNodes.splice(index, 0, newNode);\n        this.refresh();\n      }\n    }\n    /**\r\n     * insertBeforeByConfig\r\n     * @param {TreeNode} - treeNode\r\n     * @param {Object} - config\r\n     */\n\n  }, {\n    key: \"insertBeforeByConfig\",\n    value: function insertBeforeByConfig(treeNode, config) {\n      var globalConfig = this.nodeGlobalConfig;\n      var newNode = new TreeNode({\n        globalConfig: globalConfig,\n        config: config,\n        tree: this.tree,\n        parentNode: this\n      });\n      this.tree.renderChildren({\n        parentNode: newNode,\n        globalConfig: globalConfig,\n        config: config\n      });\n      this.insertBefore(treeNode, newNode);\n    }\n    /**\r\n     * insertAfter\r\n     * @param {TreeNode} - treeNode\r\n     * @param {TreeNode} - newNode\r\n     */\n\n  }, {\n    key: \"insertAfter\",\n    value: function insertAfter(treeNode, newNode) {\n      if (!treeNode || !newNode) return false;\n      var index = this.childrenNodes.findIndex(function (n) {\n        return n === treeNode;\n      });\n\n      if (index === -1) {\n        this.append(newNode);\n        this.refresh();\n      } else if (index === this.childrenNodes.length - 1) {\n        this.prepend(newNode);\n      } else {\n        // dom\n        _uiUtil.Dom6.insertAfter(newNode.getEl(), treeNode.getEl()); // array\n\n\n        this.childrenNodes.splice(index + 1, 0, newNode);\n        this.refresh();\n      }\n    }\n    /**\r\n     * insertAfterByConfig\r\n     * @param {TreeNode} - treeNode\r\n     * @param {Object} - config\r\n     */\n\n  }, {\n    key: \"insertAfterByConfig\",\n    value: function insertAfterByConfig(treeNode, config) {\n      var globalConfig = this.nodeGlobalConfig;\n      var newNode = new TreeNode({\n        globalConfig: globalConfig,\n        config: config,\n        tree: this.tree,\n        parentNode: this\n      });\n      this.tree.renderChildren({\n        parentNode: newNode,\n        globalConfig: globalConfig,\n        config: config\n      });\n      this.insertAfter(treeNode, newNode);\n    }\n    /**\r\n     * replaceNode\r\n     * @param {TreeNode} - treeNode\r\n     * @param {TreeNode} - newNode\r\n     * @return {boolean}\r\n     */\n\n  }, {\n    key: \"replaceNode\",\n    value: function replaceNode(treeNode, newNode) {\n      if (!treeNode || !newNode) return false;\n      var index = this.childrenNodes.findIndex(function (n) {\n        return n === treeNode;\n      });\n      if (index === -1) return false;\n      this.childrenEl.replaceChild(newNode.getEl(), treeNode.getEl());\n      this.childrenNodes.splice(index, 1, newNode);\n      this.refresh();\n    }\n    /**\r\n     * replaceNodeByConfig\r\n     * @param {TreeNode} - treeNode\r\n     * @param {Object} - config\r\n     */\n\n  }, {\n    key: \"replaceNodeByConfig\",\n    value: function replaceNodeByConfig(treeNode, config) {\n      var globalConfig = this.nodeGlobalConfig;\n      var newNode = new TreeNode({\n        globalConfig: globalConfig,\n        config: config,\n        tree: this.tree,\n        parentNode: this\n      });\n      this.tree.renderChildren({\n        parentNode: newNode,\n        globalConfig: globalConfig,\n        config: config\n      });\n      this.replaceNode(treeNode, newNode);\n    }\n    /**\r\n     * removeChildren\r\n     * @param {TreeNode} treeNode\r\n     */\n\n  }, {\n    key: \"removeChildren\",\n    value: function removeChildren(treeNode) {\n      if (!treeNode) return false;\n      if (this.isLeaf()) return false;\n      var index = this.childrenNodes.findIndex(function (n) {\n        return n === treeNode;\n      });\n      if (index === -1) return false;\n      this.childrenNodes.splice(index, 1);\n\n      _uiUtil.Dom6.remove(treeNode.getEl());\n\n      if (this.isLeaf()) {\n        _uiUtil.Dom6.addClass(this.itemTriggerEl, 'invisible');\n      }\n\n      this.refresh();\n    }\n    /**\r\n     * childrenNodes\r\n     * @return {Array}\r\n     */\n\n  }, {\n    key: \"childrens\",\n    value: function childrens() {\n      return [].concat(this.childrenNodes);\n    }\n    /**\r\n     * expand\r\n     * @param {Boolean} - expaned\r\n     */\n\n  }, {\n    key: \"expand\",\n    value: function expand(expaned) {\n      _expand.call(this, expaned);\n    }\n    /**\r\n     * resetRemoteNode\r\n     * 重置loadType === 'remote' 的节点使其能够重新载入数据，并且先闭合节点\r\n     */\n\n  }, {\n    key: \"resetRemoteNode\",\n    value: function resetRemoteNode() {\n      var loadType = this.config.loadType;\n      if (loadType !== 'remote') return false;\n      this.expand(false);\n      this.isload = false;\n    }\n    /**\r\n     * isExpand\r\n     * @return {Boolean}\r\n     */\n\n  }, {\n    key: \"isExpand\",\n    value: function isExpand() {\n      return this.isExpand;\n    }\n    /**\r\n     * getAttr\r\n     * @param {String} - attr\r\n     * @return {String} - value\r\n     */\n\n  }, {\n    key: \"getAttr\",\n    value: function getAttr(attr) {\n      return this.el.dataset[attr];\n    }\n    /**\r\n     * setAttr\r\n     * @param {String} - key\r\n     * @param {String} - value\r\n     */\n\n  }, {\n    key: \"setAttr\",\n    value: function setAttr(key, value) {\n      this.el.dataset[key] = value;\n    }\n    /**\r\n     * hasAttr\r\n     * @param {String} - key\r\n     * @param {String} - value\r\n     * @return {boolean}\r\n     */\n\n  }, {\n    key: \"hasAttr\",\n    value: function hasAttr(key, value) {\n      var srcValue = this.getAttr(key);\n      return value === srcValue;\n    }\n    /**\r\n     * getLabel\r\n     * @return {String}\r\n     */\n\n  }, {\n    key: \"getLabel\",\n    value: function getLabel() {\n      return this.itemTextEl.innerText;\n    }\n    /**\r\n     * setLabel\r\n     * @param {String} - label\r\n     */\n\n  }, {\n    key: \"setLabel\",\n    value: function setLabel(label) {\n      this.itemTextEl.innerText = label;\n    }\n    /**\r\n     * setIcon\r\n     * @param {String} - icon\r\n     */\n\n  }, {\n    key: \"setIcon\",\n    value: function setIcon(newIcon) {\n      var self = this;\n      var _this$config5 = this.config,\n          srcIcon = _this$config5.icon,\n          iconColor = _this$config5.iconColor;\n\n      function createIcon() {\n        self.config.icon = newIcon;\n        self.itemIconEl = _uiUtil.Dom6.createElement(\"<span class=\\\"\".concat(selectorPrefix, \"item-icon fa fa-\").concat(newIcon, \"\\\" style=\\\"color:\").concat(iconColor || '', \"\\\"></span>\"));\n\n        _uiUtil.Dom6.prepend(self.itemLabelEl, self.itemIconEl);\n      }\n\n      if (!srcIcon) {\n        createIcon();\n      } else if (!this.itemIconEl) {\n        createIcon();\n      } else {\n        this.config.icon = newIcon;\n\n        _uiUtil.Dom6.removeClass(this.itemIconEl, \"fa fa-\".concat(srcIcon));\n\n        _uiUtil.Dom6.addClass(this.itemIconEl, \"fa fa-\".concat(newIcon));\n      }\n    }\n    /**\r\n     * getIcon\r\n     * @return {String}\r\n     */\n\n  }, {\n    key: \"getIcon\",\n    value: function getIcon() {\n      return this.config.icon;\n    }\n    /**\r\n     * setIconColor\r\n     * @param {String} - iconColor\r\n     */\n\n  }, {\n    key: \"setIconColor\",\n    value: function setIconColor(iconColor) {\n      var icon = this.config.icon;\n      if (!icon) return false;\n      if (!this.itemIconEl) return false;\n      this.config.iconColor = iconColor;\n      this.itemIconEl.style.color = iconColor;\n    }\n    /**\r\n     * getIconColor\r\n     * @return {string}\r\n     */\n\n  }, {\n    key: \"getIconColor\",\n    value: function getIconColor() {\n      return this.config.iconColor;\n    }\n    /**\r\n     * isLeaf\r\n     * @return {Boolean}\r\n     */\n\n  }, {\n    key: \"isLeaf\",\n    value: function isLeaf() {\n      return this.childrenNodes.length <= 0;\n    }\n    /**\r\n     * isRoot\r\n     * @return {boolean}\r\n     */\n\n  }, {\n    key: \"isRoot\",\n    value: function isRoot() {\n      return !!this.parentNode;\n    }\n    /**\r\n     * getEl\r\n     * @return {HTMLElement}\r\n     */\n\n  }, {\n    key: \"getEl\",\n    value: function getEl() {\n      return this.el;\n    }\n    /**\r\n     * checked\r\n     * @return {boolean}\r\n     */\n\n  }, {\n    key: \"isChecked\",\n    value: function isChecked() {\n      if (this.isCheckboxType()) {\n        if (this.itemInputFieldEl) {\n          return this.itemInputFieldEl.checked;\n        } else {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    }\n    /**\r\n     * getType\r\n     * @return {string}\r\n     */\n\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return this.config.type;\n    }\n    /**\r\n     * getParentNode\r\n     * @return {TreeNode}\r\n     */\n\n  }, {\n    key: \"getParentNode\",\n    value: function getParentNode() {\n      return this.parentNode;\n    }\n    /**\r\n     * isCheckboxType\r\n     * @return {boolean}\r\n     */\n\n  }, {\n    key: \"isCheckboxType\",\n    value: function isCheckboxType() {\n      return ['checkbox', 'radio'].indexOf(this.config.type) !== -1;\n    }\n    /**\r\n     * checkboxDrillUp\r\n     */\n\n  }, {\n    key: \"checkboxDrillUp\",\n    value: function checkboxDrillUp() {\n      //   if(父节点的所有checkbox节点都选中) {\n      //     父节点渲染成选中状态 - 一直向上追溯\n      //   }\n      var isCheckbox = this.isCheckboxType();\n      if (!isCheckbox) return false;\n      var checkboxNodes = [];\n\n      for (var i = 0; i < this.childrenNodes.length; i++) {\n        var treeNode = this.childrenNodes[i];\n\n        if (treeNode.itemInputFieldEl) {\n          checkboxNodes.push(treeNode);\n        }\n      }\n\n      var checkeds = checkboxNodes.filter(function (node) {\n        return node.isChecked();\n      }); // 子元素都选中了\n\n      if (checkeds.length === checkboxNodes.length) {\n        this.itemInputFieldEl.checked = true;\n        renderCheckboxCheckAll.call(this);\n\n        if (this.parentNode) {\n          this.parentNode.checkboxDrillUp();\n        }\n      } else {\n        this.itemInputFieldEl.checked = false;\n\n        if (checkeds.length !== 0) {\n          // 子节点有选中的\n          renderCheckboxUncheckall.call(this);\n        } else {\n          renderCheckboxUnchecked.call(this);\n        }\n\n        if (this.parentNode) {\n          this.parentNode.checkboxDrillUp();\n        }\n      }\n    }\n    /**\r\n     * detailItemInputsRecursive\r\n     */\n\n  }, {\n    key: \"detailItemInputsRecursive\",\n    value: function detailItemInputsRecursive() {\n      if (this.isLeaf()) {\n        if (this.getType() === 'checkbox') {\n          if (this.isChecked()) {\n            renderCheckboxCheckAll.call(this);\n          } else {\n            renderCheckboxUnchecked.call(this);\n          }\n\n          var parentNode = this.getParentNode();\n\n          if (parentNode) {\n            parentNode.checkboxDrillUp();\n          }\n        }\n      } else {\n        var children = this.childrens();\n\n        for (var i = 0; i < children.length; i++) {\n          children[i].detailItemInputsRecursive();\n        }\n      }\n    }\n    /**\r\n     * checked\r\n     * @param {boolean} - check\r\n     */\n\n  }, {\n    key: \"checked\",\n    value: function checked(check) {\n      _checked.call(this, check);\n\n      this.detailItemInputsRecursive();\n      this.events.trigger('checked', this, check);\n    }\n    /**\r\n     * refresh\r\n     */\n\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      var parentNode = this.getParentNode();\n\n      if (parentNode) {\n        parentNode.detailItemInputsRecursive();\n      } else {\n        this.detailItemInputsRecursive();\n      }\n    }\n  }]);\n  return TreeNode;\n}();\n\nvar _default = TreeNode;\nexports.default = _default;"]}