{"version":3,"sources":["kwlist.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_default","_classCallCheck2","_createClass2","_uiUtil","show","contentEl","optionEl","querySelector","buttonsEl","this","preContentEl","hide","call","classList","add","style","display","events","trigger","dataset","index","remove","initEvents","self","el","addEventListener","e","target","contains","Dom6","getTopDom","KwList","Events","refresh","key","contentEls","querySelectorAll","i","length","type","handler","on","concat"],"mappings":"AAAA,aAEA,IAAIA,uBAAyBC,QAAQ,gDAErCC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAETD,QAAQE,QAAUC,SAElB,IAAIC,iBAAmBR,uBAAuBC,QAAQ,0CAElDQ,cAAgBT,uBAAuBC,QAAQ,uCAE/CS,QAAUT,QAAQ,qBAOtB,SAASU,KAAKC,GACZ,IAAIC,EAAWD,EAAUE,cAAc,2BACnCC,EAAYH,EAAUE,cAAc,4BAEpCE,KAAKC,cAAgBL,IAAcI,KAAKC,cAC1CC,KAAKC,KAAKH,KAAMA,KAAKC,cAGvBJ,EAASO,UAAUC,IAAI,YACvBN,EAAUO,MAAMC,QAAU,OAEtBX,IAAcI,KAAKC,eACrBD,KAAKC,aAAeL,GAGtBI,KAAKQ,OAAOC,QAAQ,OAAQb,EAAWA,EAAUc,QAAQC,OAS3D,SAAST,KAAKN,GACZ,IAAIC,EAAWD,EAAUE,cAAc,2BACnCC,EAAYH,EAAUE,cAAc,4BACxCD,EAASO,UAAUQ,OAAO,YAC1Bb,EAAUO,MAAMC,QAAU,OAC1BP,KAAKQ,OAAOC,QAAQ,OAAQb,EAAWA,EAAUc,QAAQC,OAQ3D,SAASE,aACP,IAAIC,EAAOd,KAEXA,KAAKe,GAAGC,iBAAiB,QAAS,SAAUC,GAC1C,IAAIC,EAASD,EAAEC,OAEf,GAAIA,EAAOd,UAAUe,SAAS,0BAA2B,CACvD,IAAIvB,EAAYF,QAAQ0B,KAAKC,UAAUH,EAAQ,2BAE3CA,EAAOd,UAAUe,SAAS,YAC5BjB,KAAKC,KAAKW,EAAMlB,GAEhBD,KAAKQ,KAAKW,EAAMlB,MAYxB,IAAI0B,OAEJ,WAME,SAASA,EAAOP,IACd,EAAIvB,iBAAiBF,SAASU,KAAMsB,GACpCtB,KAAKe,GAAKA,EACVf,KAAKQ,OAAS,IAAId,QAAQ6B,OAC1BvB,KAAKwB,UACLX,WAAWV,KAAKH,MAkDlB,OA3CA,EAAIP,cAAcH,SAASgC,EAAQ,CAAC,CAClCG,IAAK,UACLpC,MAAO,WAGL,IAFA,IAAIqC,EAAa1B,KAAKe,GAAGY,iBAAiB,4BAEjCC,EAAI,EAAGA,EAAIF,EAAWG,OAAQD,IACrCF,EAAWE,GAAGlB,QAAQC,MAAQiB,IASjC,CACDH,IAAK,KACLpC,MAAO,SAAYyC,EAAMC,GACvB/B,KAAKQ,OAAOwB,GAAGF,EAAMC,KAOtB,CACDN,IAAK,SACLpC,MAAO,SAAgBsB,GACrB,IAAIf,EAAYI,KAAKe,GAAGjB,cAAc,wCAAwCmC,OAAOtB,EAAO,OAC5FhB,KAAKQ,KAAKH,KAAMJ,KAOjB,CACD6B,IAAK,QACLpC,MAAO,SAAesB,GACpB,IAAIf,EAAYI,KAAKe,GAAGjB,cAAc,wCAAwCmC,OAAOtB,EAAO,OAC5FT,KAAKC,KAAKH,KAAMJ,OAGb0B,EA7DT,GAsEA,SAAS/B,SAASwB,GAChB,OAAO,IAAIO,OAAOP","file":"kwlist.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _uiUtil = require(\"@ctmobile/ui-util\");\n\n/**\r\n * 显示\r\n * @access private\r\n * @param {HtmlElement} contentEl\r\n */\nfunction show(contentEl) {\n  var optionEl = contentEl.querySelector('.ct-list-kw-item-option');\n  var buttonsEl = contentEl.querySelector('.ct-list-kw-item-buttons');\n\n  if (this.preContentEl && contentEl !== this.preContentEl) {\n    hide.call(this, this.preContentEl);\n  }\n\n  optionEl.classList.add('activity');\n  buttonsEl.style.display = 'flex';\n\n  if (contentEl !== this.preContentEl) {\n    this.preContentEl = contentEl;\n  }\n\n  this.events.trigger('show', contentEl, contentEl.dataset.index);\n}\n/**\r\n * 隐藏\r\n * @access private\r\n * @param {HtmlElement} contentEl\r\n */\n\n\nfunction hide(contentEl) {\n  var optionEl = contentEl.querySelector('.ct-list-kw-item-option');\n  var buttonsEl = contentEl.querySelector('.ct-list-kw-item-buttons');\n  optionEl.classList.remove('activity');\n  buttonsEl.style.display = 'none';\n  this.events.trigger('hide', contentEl, contentEl.dataset.index);\n}\n/**\r\n *  initEvents\r\n *  @access private\r\n */\n\n\nfunction initEvents() {\n  var self = this; // 点击操作按钮的事件监听\n\n  this.el.addEventListener('click', function (e) {\n    var target = e.target;\n\n    if (target.classList.contains('ct-list-kw-item-option')) {\n      var contentEl = _uiUtil.Dom6.getTopDom(target, 'ct-list-kw-item-content');\n\n      if (target.classList.contains('activity')) {\n        hide.call(self, contentEl);\n      } else {\n        show.call(self, contentEl);\n      }\n    }\n  });\n}\n/**\r\n * KwList\r\n * @class KwList\r\n * @classdesc KwList\r\n */\n\n\nvar KwList =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * constructor\r\n   * @constructor\r\n   * @param el\r\n   */\n  function KwList(el) {\n    (0, _classCallCheck2.default)(this, KwList);\n    this.el = el;\n    this.events = new _uiUtil.Events();\n    this.refresh();\n    initEvents.call(this);\n  }\n  /**\r\n   * 刷新\r\n   */\n\n\n  (0, _createClass2.default)(KwList, [{\n    key: \"refresh\",\n    value: function refresh() {\n      var contentEls = this.el.querySelectorAll('.ct-list-kw-item-content');\n\n      for (var i = 0; i < contentEls.length; i++) {\n        contentEls[i].dataset.index = i;\n      }\n    }\n    /**\r\n     * on\r\n     * @param {string} type\r\n     * @param {Function} handler\r\n     */\n\n  }, {\n    key: \"on\",\n    value: function on(type, handler) {\n      this.events.on(type, handler);\n    }\n    /**\r\n     * expand\r\n     * @param {number} index\r\n     */\n\n  }, {\n    key: \"expand\",\n    value: function expand(index) {\n      var contentEl = this.el.querySelector(\".ct-list-kw-item-content[data-index='\".concat(index, \"']\"));\n      show.call(this, contentEl);\n    }\n    /**\r\n     * close\r\n     * @param {number} index\r\n     */\n\n  }, {\n    key: \"close\",\n    value: function close(index) {\n      var contentEl = this.el.querySelector(\".ct-list-kw-item-content[data-index='\".concat(index, \"']\"));\n      hide.call(this, contentEl);\n    }\n  }]);\n  return KwList;\n}();\n/**\r\n * KwListFactory\r\n * @param {HtmlElement} el\r\n * @return {KwList}\r\n */\n\n\nfunction _default(el) {\n  return new KwList(el);\n}"]}