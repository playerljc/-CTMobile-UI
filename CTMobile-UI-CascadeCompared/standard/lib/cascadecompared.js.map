{"version":3,"sources":["cascadecompared.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_classCallCheck2","_createClass2","_jquery","_iscrollProbe","_uiStickuplayoutSd","SELECTORS","column","indicatorFixedWrap","indicatorAutoWrap","masterFixedWrap","masterAutoWrap","indicatorFirstCell","indicatorCellOfType","index","concat","masterCellOfType","row","indicator","masterFixedWrapRow","masterAutoWrapRow","isAuto","initScroll","self","this","wrapEls","el","querySelectorAll","i","scrolls","length","destroy","_i","scroll","probeType","eventPassthrough","scrollX","scrollY","preventDefault","push","on","j","scrollTo","x","y","stickup","events","scrollEnd","initial","initDimension","call","_this$config","config","_this$config$columnsW","columnsWidth","_this$config$rowsHeig","rowsHeight","columnCellLength","$el","find","css","parseInt","rowLength","_i2","_value","eq","CascadeCompared","JSON","parse","stringify","key","duration","arguments","undefined","scrollToByIndex","headerEl","scrollToByHeaderEl","columnIndex","scrollToElement","wrapper","refresh","type","handler","CascadeComparedFactory","initTouch","document","addEventListener","e","supportsPassiveOption","get","isPassive","capture","passive","create","_default"],"mappings":"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","file":"cascadecompared.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _jquery = _interopRequireDefault(require(\"jquery\"));\n\nvar _iscrollProbe = _interopRequireDefault(require(\"iscroll/build/iscroll-probe\"));\n\nvar _uiStickuplayoutSd = _interopRequireDefault(require(\"@ctmobile/ui-stickuplayout-sd\"));\n\n/** *\r\n * 选择器\r\n */\nvar SELECTORS = {\n  column: '.ct-cascadecompared-indicator > .ct-cascadecompared-autoWrap > .ct-cascadecompared-item > .ct-cascadecompared-cell',\n  indicatorFixedWrap: '.ct-cascadecompared-indicator > .ct-cascadecompared-fixedWrap',\n  indicatorAutoWrap: '.ct-cascadecompared-indicator > .ct-cascadecompared-autoWrap',\n  masterFixedWrap: '.ct-cascadecompared-master > .ct-cascadecompared-master-inner > .ct-stickuplayout-inner > .ct-stickuplayout-item > .ct-stickuplayout-item-content > .ct-cascadecompared-fixedWrap',\n  masterAutoWrap: '.ct-cascadecompared-master > .ct-cascadecompared-master-inner > .ct-stickuplayout-inner > .ct-stickuplayout-item > .ct-stickuplayout-item-content > .ct-cascadecompared-autoWrap',\n  indicatorFirstCell: '.ct-cascadecompared-indicator > .ct-cascadecompared-fixedWrap > .ct-cascadecompared-item > .ct-cascadecompared-cell',\n  indicatorCellOfType: function indicatorCellOfType(index) {\n    return \".ct-cascadecompared-indicator > .ct-cascadecompared-autoWrap > .ct-cascadecompared-item > .ct-cascadecompared-cell:nth-of-type(\".concat(index, \")\");\n  },\n  masterCellOfType: function masterCellOfType(index) {\n    return \".ct-cascadecompared-master > .ct-cascadecompared-master-inner > .ct-stickuplayout-inner > .ct-stickuplayout-item > .ct-stickuplayout-item-content > .ct-cascadecompared-autoWrap .ct-cascadecompared-item > .ct-cascadecompared-cell:nth-of-type(\".concat(index, \")\");\n  },\n  row: '.ct-cascadecompared-master > .ct-cascadecompared-master-inner > .ct-stickuplayout-inner > .ct-stickuplayout-item > .ct-stickuplayout-item-content > .ct-cascadecompared-fixedWrap > .ct-cascadecompared-item',\n  indicator: 'ct-cascadecompared-indicator',\n  masterFixedWrapRow: '.ct-cascadecompared-master > .ct-cascadecompared-master-inner > .ct-stickuplayout-inner > .ct-stickuplayout-item > .ct-stickuplayout-item-content > .ct-cascadecompared-fixedWrap > .ct-cascadecompared-item',\n  masterAutoWrapRow: '.ct-cascadecompared-master > .ct-cascadecompared-master-inner > .ct-stickuplayout-inner > .ct-stickuplayout-item > .ct-stickuplayout-item-content > .ct-cascadecompared-autoWrap > .ct-cascadecompared-autoInner > .ct-cascadecompared-item'\n};\n/**\r\n * isAuto\r\n * @access private\r\n */\n\nfunction isAuto(value) {\n  return !value || value === 'undefined' || value === null || value === '' || value === 'auto';\n}\n/**\r\n * initScroll\r\n * @access private\r\n */\n\n\nfunction initScroll() {\n  var self = this;\n  this.wrapEls = this.el.querySelectorAll('.ct-cascadecompared-autoWrap');\n\n  for (var i = 0; i < this.scrolls.length; i++) {\n    this.scrolls[i].destroy();\n  }\n\n  this.scrolls = [];\n\n  for (var _i = 0; _i < this.wrapEls.length; _i++) {\n    var scroll = new _iscrollProbe[\"default\"](this.wrapEls[_i], {\n      probeType: 3,\n      eventPassthrough: true,\n      scrollX: true,\n      scrollY: false,\n      preventDefault: false\n    });\n    this.scrolls.push(scroll);\n    scroll.on('scroll', function () {\n      for (var j = 0; j < self.scrolls.length; j++) {\n        if (self.scrolls[j] !== this) {\n          self.scrolls[j].scrollTo(this.x, this.y);\n        }\n      }\n    });\n    scroll.on('scrollEnd', function () {\n      if (self.stickup.events.scrollEnd) {\n        self.stickup.events.scrollEnd();\n      }\n    });\n  }\n}\n/**\r\n * position 初始化\r\n * @access private\r\n */\n\n\nfunction initial() {\n  this.scrolls = []; // 初始化stickup\n\n  initDimension.call(this);\n  this.stickup = (0, _uiStickuplayoutSd[\"default\"])(this.el);\n  initScroll.call(this);\n}\n/**\r\n * 计算尺寸\r\n * @access private\r\n */\n\n\nfunction initDimension() {\n  var _this$config = this.config,\n      _this$config$columnsW = _this$config.columnsWidth,\n      columnsWidth = _this$config$columnsW === void 0 ? [] : _this$config$columnsW,\n      _this$config$rowsHeig = _this$config.rowsHeight,\n      rowsHeight = _this$config$rowsHeig === void 0 ? [] : _this$config$rowsHeig; // 获取有多少列\n\n  var columnCellLength = this.el.querySelectorAll(SELECTORS.column).length; // 设置列的宽度\n\n  for (var i = 0; i < columnCellLength + 1; i++) {\n    var value = void 0;\n\n    if (i === 0) {\n      // 第一列\n      if (isAuto(columnsWidth[0])) {// 自动宽度,宽度需要计算\n        // value = computeAutoMaxValue.call(this, [SELECTORS.indicatorFirstCell, SELECTORS.masterFixedWrap], 'height');\n      } else {\n        // 设置列值\n        value = columnsWidth[0];\n      }\n\n      this.$el.find(SELECTORS.indicatorFixedWrap).css('width', \"\".concat(parseInt(value), \"px\"));\n      this.$el.find(SELECTORS.indicatorAutoWrap).css('margin-left', \"\".concat(parseInt(value), \"px\"));\n      this.$el.find(SELECTORS.masterFixedWrap).css('width', \"\".concat(parseInt(value), \"px\"));\n      this.$el.find(SELECTORS.masterAutoWrap).css('margin-left', \"\".concat(parseInt(value), \"px\"));\n    } else {\n      // 其他列\n      if (isAuto(columnsWidth[i])) {// 自动宽度，宽度需要计算\n        // value = computeAutoMaxValue();\n      } else {\n        // 设置列值\n        value = columnsWidth[i];\n      }\n\n      this.$el.find(SELECTORS.indicatorCellOfType(i)).css('width', \"\".concat(parseInt(value), \"px\"));\n      this.$el.find(SELECTORS.masterCellOfType(i)).css('width', \"\".concat(parseInt(value), \"px\"));\n    }\n  } // 获取有多少行\n\n\n  var rowLength = this.$el.find(SELECTORS.row).length; // 设置行的高度\n\n  for (var _i2 = 0; _i2 < rowLength + 1; _i2++) {\n    var _value = void 0;\n\n    if (_i2 === 0) {\n      // 第一行\n      if (isAuto(rowsHeight[0])) {// 自动高度,高度需要计算\n        // value = computeAutoMaxValue();\n      } else {\n        // 设置了行值\n        _value = rowsHeight[0];\n      }\n\n      this.$el.find(SELECTORS.indicator).css('height', \"\".concat(parseInt(_value), \"px\"));\n    } else {\n      if (isAuto(rowsHeight[_i2])) {// 自动高度,高度需要计算\n        // value = computeAutoMaxValue();\n      } else {\n        // 其他行\n        _value = rowsHeight[_i2];\n      }\n\n      this.$el.find(SELECTORS.masterFixedWrapRow).eq(_i2 - 1).css('height', \"\".concat(_value, \"px\"));\n      this.$el.find(SELECTORS.masterAutoWrapRow).eq(_i2 - 1).css('height', \"\".concat(_value, \"px\"));\n    }\n  }\n}\n/**\r\n * CascadeCompared\r\n * @class CascadeCompared\r\n * @classdesc CascadeCompared\r\n */\n\n\nvar CascadeCompared =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * constructor\r\n   * @param {HTMLElement} el\r\n   * @param {Object} config {\r\n   *   columnsWidth: [] 所有列的宽度 从头开始 如果自动设置为auto 否则是number数字 如果没有设置则是auto\r\n   *   rowsHeight: [] 所有行的高度 从头开始 如果自动设置为auto 否则是number数字 如果没有设置则是auto\r\n   * }\r\n   */\n  function CascadeCompared(el, config) {\n    (0, _classCallCheck2[\"default\"])(this, CascadeCompared);\n    this.el = el;\n    this.$el = (0, _jquery[\"default\"])(this.el);\n    this.config = JSON.parse(JSON.stringify(config));\n    initial.call(this);\n  }\n  /**\r\n   * scrollToByIndex\r\n   * @param {number} index\r\n   * @param {number} duration\r\n   * @return {boolean}\r\n   */\n\n\n  (0, _createClass2[\"default\"])(CascadeCompared, [{\n    key: \"scrollToByIndex\",\n    value: function scrollToByIndex(index) {\n      var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 300;\n      this.stickup.scrollToByIndex(index, duration);\n    }\n    /**\r\n     * scrollToByHeaderEl\r\n     * @param {HtmlElement} headerEl\r\n     * @param {number} duration\r\n     * @return {boolean}\r\n     */\n\n  }, {\n    key: \"scrollToByHeaderEl\",\n    value: function scrollToByHeaderEl(headerEl) {\n      var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 300;\n      this.stickup.scrollToByHeaderEl(headerEl, duration);\n    }\n    /**\r\n     * scrollToByColumn\r\n     * @param {number} columnIndex\r\n     */\n\n  }, {\n    key: \"scrollToByColumn\",\n    value: function scrollToByColumn(columnIndex) {\n      var scroll = this.scrolls[0];\n      scroll.scrollToElement((0, _jquery[\"default\"])(scroll.wrapper).find(\".ct-cascadecompared-item .ct-cascadecompared-cell:nth-of-type(\".concat(columnIndex, \")\"))[0]);\n    }\n    /**\r\n     * 刷新\r\n     */\n\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      initDimension.call(this);\n      initScroll.call(this);\n      this.stickup.refresh();\n    }\n    /**\r\n     * 注册事件\r\n     * @param {string} type 事件类型\r\n     * @param {Function} handler 事件处理函数\r\n     */\n\n  }, {\n    key: \"on\",\n    value: function on(type, handler) {\n      this.stickup.on(type, handler);\n    }\n  }]);\n  return CascadeCompared;\n}();\n/**\r\n * CascadeComparedFactory\r\n */\n\n\nvar CascadeComparedFactory = {\n  /**\r\n   * initTouch\r\n   */\n  initTouch: function initTouch() {\n    function isPassive() {\n      var supportsPassiveOption = false;\n\n      try {\n        addEventListener('test', null, Object.defineProperty({}, 'passive', {\n          get: function get() {\n            supportsPassiveOption = true;\n          }\n        }));\n      } catch (e) {}\n\n      return supportsPassiveOption;\n    }\n\n    document.addEventListener('touchmove', function (e) {\n      e.preventDefault();\n    }, isPassive() ? {\n      capture: false,\n      passive: false\n    } : false);\n  },\n\n  /**\r\n   * 创建一个CascadeCompared\r\n   * @param {HtmlElement} - el\r\n   * @param {Object} - config\r\n   * @return {CascadeCompared} - CascadeCompared\r\n   */\n  create: function create(el) {\n    var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return new CascadeCompared(el, config);\n  }\n};\nvar _default = CascadeComparedFactory;\nexports[\"default\"] = _default;"]}