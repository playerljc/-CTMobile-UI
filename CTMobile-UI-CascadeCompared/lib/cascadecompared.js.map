{"version":3,"sources":["cascadecompared.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_default","_classCallCheck2","_createClass2","_jquery","_iscrollProbe","_uiStickuplayout","SELECTORS","column","indicatorFixedWrap","indicatorAutoWrap","masterFixedWrap","masterAutoWrap","indicatorFirstCell","indicatorCellOfType","index","concat","masterCellOfType","row","indicator","masterFixedWrapRow","masterAutoWrapRow","isAuto","initScroll","self","this","wrapEls","el","querySelectorAll","i","scrolls","length","destroy","_i","scroll","probeType","eventPassthrough","scrollX","scrollY","preventDefault","push","on","j","scrollTo","x","y","stickup","events","initial","initDimension","call","_this$config","config","_this$config$columnsW","columnsWidth","_this$config$rowsHeig","rowsHeight","columnCellLength","$el","find","css","parseInt","rowLength","_i2","_value","eq","CascadeCompared","JSON","parse","stringify","key","duration","arguments","undefined","scrollToByIndex","headerEl","scrollToByHeaderEl","columnIndex","scrollToElement","wrapper","refresh","type","handler"],"mappings":"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","file":"cascadecompared.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _jquery = _interopRequireDefault(require(\"jquery\"));\n\nvar _iscrollProbe = _interopRequireDefault(require(\"iscroll/build/iscroll-probe\"));\n\nvar _uiStickuplayout = _interopRequireDefault(require(\"@ctmobile/ui-stickuplayout\"));\n\n/***\r\n * 选择器\r\n */\nvar SELECTORS = {\n  column: '.ct-cascadecompared-indicator > .ct-cascadecompared-autoWrap > .ct-cascadecompared-item > .ct-cascadecompared-cell',\n  indicatorFixedWrap: '.ct-cascadecompared-indicator > .ct-cascadecompared-fixedWrap',\n  indicatorAutoWrap: '.ct-cascadecompared-indicator > .ct-cascadecompared-autoWrap',\n  masterFixedWrap: '.ct-cascadecompared-master > .ct-cascadecompared-master-inner > .ct-stickuplayout-inner > .ct-stickuplayout-item > .ct-stickuplayout-item-content > .ct-cascadecompared-fixedWrap',\n  masterAutoWrap: '.ct-cascadecompared-master > .ct-cascadecompared-master-inner > .ct-stickuplayout-inner > .ct-stickuplayout-item > .ct-stickuplayout-item-content > .ct-cascadecompared-autoWrap',\n  indicatorFirstCell: '.ct-cascadecompared-indicator > .ct-cascadecompared-fixedWrap > .ct-cascadecompared-item > .ct-cascadecompared-cell',\n  indicatorCellOfType: function indicatorCellOfType(index) {\n    return \".ct-cascadecompared-indicator > .ct-cascadecompared-autoWrap > .ct-cascadecompared-item > .ct-cascadecompared-cell:nth-of-type(\".concat(index, \")\");\n  },\n  masterCellOfType: function masterCellOfType(index) {\n    return \".ct-cascadecompared-master > .ct-cascadecompared-master-inner > .ct-stickuplayout-inner > .ct-stickuplayout-item > .ct-stickuplayout-item-content > .ct-cascadecompared-autoWrap .ct-cascadecompared-item > .ct-cascadecompared-cell:nth-of-type(\".concat(index, \")\");\n  },\n  row: '.ct-cascadecompared-master > .ct-cascadecompared-master-inner > .ct-stickuplayout-inner > .ct-stickuplayout-item > .ct-stickuplayout-item-content > .ct-cascadecompared-fixedWrap > .ct-cascadecompared-item',\n  indicator: 'ct-cascadecompared-indicator',\n  masterFixedWrapRow: '.ct-cascadecompared-master > .ct-cascadecompared-master-inner > .ct-stickuplayout-inner > .ct-stickuplayout-item > .ct-stickuplayout-item-content > .ct-cascadecompared-fixedWrap > .ct-cascadecompared-item',\n  masterAutoWrapRow: '.ct-cascadecompared-master > .ct-cascadecompared-master-inner > .ct-stickuplayout-inner > .ct-stickuplayout-item > .ct-stickuplayout-item-content > .ct-cascadecompared-autoWrap > .ct-cascadecompared-autoInner > .ct-cascadecompared-item'\n};\n/**\r\n * isAuto\r\n * @access private\r\n */\n\nfunction isAuto(value) {\n  return !value || value === 'undefined' || value === null || value === '' || value === 'auto';\n}\n/**\r\n * initScroll\r\n * @access private\r\n */\n\n\nfunction initScroll() {\n  var self = this;\n  this.wrapEls = this.el.querySelectorAll('.ct-cascadecompared-autoWrap');\n\n  for (var i = 0; i < this.scrolls.length; i++) {\n    this.scrolls[i].destroy();\n  }\n\n  this.scrolls = [];\n\n  for (var _i = 0; _i < this.wrapEls.length; _i++) {\n    var scroll = new _iscrollProbe.default(this.wrapEls[_i], {\n      probeType: 3,\n      eventPassthrough: true,\n      scrollX: true,\n      scrollY: false,\n      preventDefault: false\n    });\n    this.scrolls.push(scroll);\n    scroll.on('scroll', function () {\n      for (var j = 0; j < self.scrolls.length; j++) {\n        if (self.scrolls[j] !== this) {\n          self.scrolls[j].scrollTo(this.x, this.y);\n        }\n      }\n    });\n    scroll.on('scrollEnd', function () {\n      if (self.stickup.events['scrollEnd']) {\n        self.stickup.events['scrollEnd']();\n      }\n    });\n  }\n}\n/**\r\n * position 初始化\r\n * @access private\r\n */\n\n\nfunction initial() {\n  this.scrolls = []; // 初始化stickup\n\n  initDimension.call(this);\n  this.stickup = (0, _uiStickuplayout.default)(this.el);\n  initScroll.call(this);\n}\n/**\r\n * 计算尺寸\r\n * @access private\r\n */\n\n\nfunction initDimension() {\n  var _this$config = this.config,\n      _this$config$columnsW = _this$config.columnsWidth,\n      columnsWidth = _this$config$columnsW === void 0 ? [] : _this$config$columnsW,\n      _this$config$rowsHeig = _this$config.rowsHeight,\n      rowsHeight = _this$config$rowsHeig === void 0 ? [] : _this$config$rowsHeig; // 获取有多少列\n\n  var columnCellLength = this.el.querySelectorAll(SELECTORS.column).length; // 设置列的宽度\n\n  for (var i = 0; i < columnCellLength + 1; i++) {\n    var value = void 0;\n\n    if (i === 0) {\n      // 第一列\n      if (isAuto(columnsWidth[0])) {// 自动宽度,宽度需要计算\n        // value = computeAutoMaxValue.call(this, [SELECTORS.indicatorFirstCell, SELECTORS.masterFixedWrap], 'height');\n      } else {\n        // 设置列值\n        value = columnsWidth[0];\n      }\n\n      this.$el.find(SELECTORS.indicatorFixedWrap).css('width', \"\".concat(parseInt(value), \"px\"));\n      this.$el.find(SELECTORS.indicatorAutoWrap).css('margin-left', \"\".concat(parseInt(value), \"px\"));\n      this.$el.find(SELECTORS.masterFixedWrap).css('width', \"\".concat(parseInt(value), \"px\"));\n      this.$el.find(SELECTORS.masterAutoWrap).css('margin-left', \"\".concat(parseInt(value), \"px\"));\n    } else {\n      // 其他列\n      if (isAuto(columnsWidth[i])) {// 自动宽度，宽度需要计算\n        // value = computeAutoMaxValue();\n      } else {\n        // 设置列值\n        value = columnsWidth[i];\n      }\n\n      this.$el.find(SELECTORS.indicatorCellOfType(i)).css('width', \"\".concat(parseInt(value), \"px\"));\n      this.$el.find(SELECTORS.masterCellOfType(i)).css('width', \"\".concat(parseInt(value), \"px\"));\n    }\n  } // 获取有多少行\n\n\n  var rowLength = this.$el.find(SELECTORS.row).length; // 设置行的高度\n\n  for (var _i2 = 0; _i2 < rowLength + 1; _i2++) {\n    var _value = void 0;\n\n    if (_i2 === 0) {\n      // 第一行\n      if (isAuto(rowsHeight[0])) {// 自动高度,高度需要计算\n        // value = computeAutoMaxValue();\n      } else {\n        // 设置了行值\n        _value = rowsHeight[0];\n      }\n\n      this.$el.find(SELECTORS.indicator).css('height', \"\".concat(parseInt(_value), \"px\"));\n    } else {\n      if (isAuto(rowsHeight[_i2])) {// 自动高度,高度需要计算\n        // value = computeAutoMaxValue();\n      } else {\n        // 其他行\n        _value = rowsHeight[_i2];\n      }\n\n      this.$el.find(SELECTORS.masterFixedWrapRow).eq(_i2 - 1).css('height', \"\".concat(_value, \"px\"));\n      this.$el.find(SELECTORS.masterAutoWrapRow).eq(_i2 - 1).css('height', \"\".concat(_value, \"px\"));\n    }\n  }\n}\n/**\r\n * CascadeCompared\r\n * @class CascadeCompared\r\n * @classdesc CascadeCompared\r\n */\n\n\nvar CascadeCompared =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * constructor\r\n   * @param {HTMLElement} el\r\n   * @param {Object} config {\r\n   *   columnsWidth: [] 所有列的宽度 从头开始 如果自动设置为auto 否则是number数字 如果没有设置则是auto\r\n   *   rowsHeight: [] 所有行的高度 从头开始 如果自动设置为auto 否则是number数字 如果没有设置则是auto\r\n   * }\r\n   */\n  function CascadeCompared(el, config) {\n    (0, _classCallCheck2.default)(this, CascadeCompared);\n    this.el = el;\n    this.$el = (0, _jquery.default)(this.el);\n    this.config = JSON.parse(JSON.stringify(config));\n    initial.call(this);\n  }\n  /**\r\n   * scrollToByIndex\r\n   * @param {number} index\r\n   * @param {number} duration\r\n   * @return {boolean}\r\n   */\n\n\n  (0, _createClass2.default)(CascadeCompared, [{\n    key: \"scrollToByIndex\",\n    value: function scrollToByIndex(index) {\n      var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 300;\n      this.stickup.scrollToByIndex(index, duration);\n    }\n    /**\r\n     * scrollToByHeaderEl\r\n     * @param {HtmlElement} headerEl\r\n     * @param {number} duration\r\n     * @return {boolean}\r\n     */\n\n  }, {\n    key: \"scrollToByHeaderEl\",\n    value: function scrollToByHeaderEl(headerEl) {\n      var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 300;\n      this.stickup.scrollToByHeaderEl(headerEl, duration);\n    }\n    /**\r\n     * scrollToByColumn\r\n     * @param {number} columnIndex\r\n     */\n\n  }, {\n    key: \"scrollToByColumn\",\n    value: function scrollToByColumn(columnIndex) {\n      var scroll = this.scrolls[0];\n      scroll.scrollToElement((0, _jquery.default)(scroll.wrapper).find(\".ct-cascadecompared-item .ct-cascadecompared-cell:nth-of-type(\".concat(columnIndex, \")\"))[0]);\n    }\n    /**\r\n     * 刷新\r\n     */\n\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      initDimension.call(this);\n      initScroll.call(this);\n      this.stickup.refresh();\n    }\n    /**\r\n     * 注册事件\r\n     * @param {string} type 事件类型\r\n     * @param {Function} handler 事件处理函数\r\n     */\n\n  }, {\n    key: \"on\",\n    value: function on(type, handler) {\n      this.stickup.on(type, handler);\n    }\n  }]);\n  return CascadeCompared;\n}();\n/**\r\n * CascadeComparedFactory\r\n * @param {HtmlElement} el\r\n * @param {Object} config\r\n * @return {CascadeCompared}\r\n */\n\n\nfunction _default(el) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return new CascadeCompared(el, config);\n}"]}