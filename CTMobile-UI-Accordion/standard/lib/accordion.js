"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=_default;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_jquery=_interopRequireDefault(require("jquery"));function init(){var e=this;this.$mask=(0,_jquery.default)('<div class="ct-accordion-radius-mask"></div>'),window.document.body.appendChild(this.$mask[0]),this.$el.on("click","dt",function(){onElClick.call(e,this)}),this.$el.find('[data-collapse="collapse"]').each(function(){e.collapse(this,!0,!0)})}function trigger(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);this.events[e]&&this.events[e].apply(this,t)}function onElClick(e){"collapse"===e.dataset.collapse?this.collapse(e,!1):this.collapse(e,!0)}var Accordion=function(){function t(e){(0,_classCallCheck2.default)(this,t),this.el=e,this.$el=(0,_jquery.default)(this.el),this.events={},init.call(this)}return(0,_createClass2.default)(t,[{key:"collapse",value:function(e,t,i){function s(){e.dataset.collapse="collapse",l.$mask.hide(),trigger.apply(l,["aftershow",e])}function a(){n.removeClass("activityDD"),e.dataset.collapse="",l.$mask.hide(),trigger.apply(l,["afterhide",e])}var l=this;if(t){if(!i&&"collapse"===e.dataset.collapse)return}else if(!(i||e.dataset.collapse&&""!==e.dataset.collapse))return;var o=(0,_jquery.default)(e),n=o.next();if(this.$mask.show(),t){trigger.apply(l,["beforeshow",e]),o.addClass("activity"),n.addClass("activityDD").show(),l.$el.hasClass("ct-accordion-classic")&&o.addClass("activityDT"),n[0].style.height="auto";var c=window.getComputedStyle(n[0]).height;i?setTimeout(function(){n[0].style.height=c,s()},15):(n[0].style.height="1px",setTimeout(function(){n.off("transitionend").one("transitionend",function(){s()}),n[0].style.height=c},15))}else trigger.apply(l,["beforehide",e]),o.removeClass("activity"),n[0].style.height="0",l.$el.hasClass("ct-accordion-classic")&&o.removeClass("activityDT"),i?a():n.off("transitionend").one("transitionend",function(){a()})}},{key:"show",value:function(e){this.collapse(e,!0,!0)}},{key:"close",value:function(e){this.collapse(e,!1,!0)}},{key:"showAll",value:function(){var e=this;this.$el.find("dt").each(function(){e.collapse(this,!0)})}},{key:"closeAll",value:function(){var e=this;e.$el.find("dt").each(function(){e.collapse(this,!1)})}},{key:"refresh",value:function(){var e=this;this.$el.find("dt").each(function(){"collapse"===this.dataset.collapse?e.collapse(this,!0,!0):e.collapse(this,!1,!0)})}},{key:"on",value:function(e,t){this.events[e]=t}}]),t}();function _default(e){return new Accordion(e)}
//# sourceMappingURL=accordion.js.map
