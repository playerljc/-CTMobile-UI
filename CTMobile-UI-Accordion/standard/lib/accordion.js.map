{"version":3,"sources":["accordion.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_default","_classCallCheck2","_createClass2","_jquery","init","self","this","$mask","window","document","body","appendChild","$el","on","onElClick","call","find","each","collapse","trigger","type","arguments","params","Array","prototype","slice","events","apply","rowDom","dataset","Accordion","el","key","_collapse","isDefault","openAfter","hide","closeAfter","$dd","removeClass","$rowDom","next","show","addClass","hasClass","style","height","targetHeight","getComputedStyle","setTimeout","off","one","dtDom","handler"],"mappings":"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","file":"accordion.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = _default;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _jquery = _interopRequireDefault(require(\"jquery\"));\n\n/**\r\n * init\r\n * @access private\r\n */\nfunction init() {\n  var self = this; // initMask\n\n  this.$mask = (0, _jquery[\"default\"])('<div class=\"ct-accordion-radius-mask\"></div>');\n  window.document.body.appendChild(this.$mask[0]); // initClickEvent\n\n  this.$el.on('click', 'dt', function () {\n    onElClick.call(self, this);\n  }); // defaultCollapse\n\n  this.$el.find('[data-collapse=\"collapse\"]').each(function () {\n    self.collapse(this, true, true);\n  });\n}\n/**\r\n * trigger\r\n * @access private\r\n */\n\n\nfunction trigger() {\n  var type = arguments[0];\n  var params = Array.prototype.slice.call(arguments, 1);\n\n  if (this.events[type]) {\n    this.events[type].apply(this, params);\n  }\n}\n/**\r\n * onElClick\r\n * @access private\r\n * @param {HtmlElement} rowDom\r\n */\n\n\nfunction onElClick(rowDom) {\n  if (rowDom.dataset.collapse === 'collapse') {\n    // close\n    this.collapse(rowDom, false);\n  } else {\n    // open\n    this.collapse(rowDom, true);\n  }\n}\n/**\r\n * Accordion\r\n * @class Accordion\r\n * @classdesc Accordion\r\n */\n\n\nvar Accordion =\n/*#__PURE__*/\nfunction () {\n  function Accordion(el) {\n    (0, _classCallCheck2[\"default\"])(this, Accordion);\n    this.el = el;\n    this.$el = (0, _jquery[\"default\"])(this.el);\n    this.events = {};\n    init.call(this);\n  }\n  /**\r\n   * 打开或折叠\r\n   * @param {HtmlElement} rowDom\r\n   * @param {boolean} collapse\r\n   * @param {boolean} isDefault 是否是默认\r\n   */\n\n\n  (0, _createClass2[\"default\"])(Accordion, [{\n    key: \"collapse\",\n    value: function collapse(rowDom, _collapse, isDefault) {\n      /**\r\n       * openAfter\r\n       * @access private\r\n       */\n      function openAfter() {\n        rowDom.dataset.collapse = 'collapse';\n        self.$mask.hide();\n        trigger.apply(self, ['aftershow', rowDom]);\n      }\n      /**\r\n       * closeAfter\r\n       * @access private\r\n       */\n\n\n      function closeAfter() {\n        $dd.removeClass('activityDD');\n        rowDom.dataset.collapse = '';\n        self.$mask.hide();\n        trigger.apply(self, ['afterhide', rowDom]);\n      }\n\n      var self = this;\n\n      if (_collapse) {\n        if (!isDefault && rowDom.dataset.collapse === 'collapse') return;\n      } else if (!isDefault && (!rowDom.dataset.collapse || rowDom.dataset.collapse === '')) return;\n\n      var $rowDom = (0, _jquery[\"default\"])(rowDom);\n      var $dd = $rowDom.next();\n      this.$mask.show(); // 打开\n\n      if (_collapse) {\n        trigger.apply(self, ['beforeshow', rowDom]);\n        $rowDom.addClass('activity');\n        $dd.addClass('activityDD').show();\n\n        if (self.$el.hasClass('ct-accordion-classic')) {\n          $rowDom.addClass('activityDT');\n        }\n\n        $dd[0].style.height = 'auto';\n        var targetHeight = window.getComputedStyle($dd[0]).height;\n\n        if (isDefault) {\n          setTimeout(function () {\n            $dd[0].style.height = targetHeight;\n            openAfter();\n          }, 15);\n        } else {\n          $dd[0].style.height = '1px';\n          setTimeout(function () {\n            $dd.off('transitionend').one('transitionend', function () {\n              openAfter();\n            });\n            $dd[0].style.height = targetHeight;\n          }, 15);\n        }\n      } else {\n        // 关闭\n        trigger.apply(self, ['beforehide', rowDom]);\n        $rowDom.removeClass('activity');\n        $dd[0].style.height = '0';\n\n        if (self.$el.hasClass('ct-accordion-classic')) {\n          $rowDom.removeClass('activityDT');\n        }\n\n        if (isDefault) {\n          closeAfter();\n        } else {\n          $dd.off('transitionend').one('transitionend', function () {\n            closeAfter();\n          });\n        }\n      }\n    }\n    /**\r\n     * show 打开\r\n     * @param dtDom\r\n     */\n\n  }, {\n    key: \"show\",\n    value: function show(dtDom) {\n      this.collapse(dtDom, true, true);\n    }\n    /**\r\n     * close 关闭\r\n     * @param dtDom\r\n     */\n\n  }, {\n    key: \"close\",\n    value: function close(dtDom) {\n      this.collapse(dtDom, false, true);\n    }\n    /**\r\n     * 显示所有\r\n     */\n\n  }, {\n    key: \"showAll\",\n    value: function showAll() {\n      var self = this;\n      this.$el.find('dt').each(function () {\n        self.collapse(this, true);\n      });\n    }\n    /**\r\n     * 全部关闭\r\n     */\n\n  }, {\n    key: \"closeAll\",\n    value: function closeAll() {\n      var self = this;\n      self.$el.find('dt').each(function () {\n        self.collapse(this, false);\n      });\n    }\n    /**\r\n     * 刷新\r\n     */\n\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      var self = this;\n      this.$el.find('dt').each(function () {\n        if (this.dataset.collapse === 'collapse') {\n          self.collapse(this, true, true);\n        } else {\n          self.collapse(this, false, true);\n        }\n      });\n    }\n    /**\r\n     * 注册事件\r\n     * @param {string} type\r\n     * @param {Function} handler\r\n     */\n\n  }, {\n    key: \"on\",\n    value: function on(type, handler) {\n      this.events[type] = handler;\n    }\n  }]);\n  return Accordion;\n}();\n/**\r\n * AccordionFactory\r\n * @param {HtmlElement} el\r\n * @return {Accordion}\r\n */\n\n\nfunction _default(el) {\n  return new Accordion(el);\n}"]}